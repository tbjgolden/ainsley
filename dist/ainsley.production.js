/*! ainsley MIT @tbjgolden */
var Ainsley=function(r,e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;const a=r=>!(null===r||"object"!=typeof r||Array.isArray(r)),t=r=>{let e=[[]],a=0;for(;a<r.length;)e=r[a++].flatMap(r=>e.map(e=>e.concat([r])));return e},i={addVariationToSelector:(r,e)=>e+"-"+r,addPropertyToSelector:(r,e)=>r+e.toLowerCase(),addValueToSelector:(r,e)=>r+e.toUpperCase(),abbreviateProperty:r=>[r.split("-").map(r=>r.charAt(0)).join("").toLowerCase(),r.toLowerCase()]},n=/\{[a-zA-Z0-9_-]+\}/g,o=(r,e)=>{let a="",t=[];for(let i=0;i<r.length;i++){const n=r[i];let o=0;for(;o<t.length&&t[o]===n.t[o];)o+=1;const s=t.slice(o);for(const r of s){r[1].startsWith("@")&&(a+="}")}const f=n.t.slice(o);for(const r of f){const e=r[1];e.startsWith("@")&&(a+=e+"{")}if("string"==typeof n.i)a+=n.i;else{let r=n.i[0],t="";for(let a=0;a<n.t.length;a++){const i=n.t[a][0],o=n.t[a][1];""!==o&&(o.startsWith("@")||(t+=""+o),r=e.addVariationToSelector(r,i))}a+=`.${r}${t}{${n.i[1].map(r=>`${r[0]}:${r[1]}`).join(";")}}`}t=n.t}for(const r of t){r[1].startsWith("@")&&(a+="}")}return a},s=(r,e,a)=>{var i;const n={...a};if(void 0!==r.variables){const e=r.variables;Object.keys(e).map(r=>{const t=l(r),i=t[0],o=t[1];0===i?n[o]=e[r]:2===i&&(n[o]={...a[o],...e[r]})})}const o=void 0===r.children?[]:f(r.children,e,n);return t((null!==(i=r.variations)&&void 0!==i?i:[]).map(r=>[["",""]].concat(r))).flatMap(r=>o.map(e=>{if("string"==typeof e.i||Array.isArray(e.i)){const a=e;return{t:[...r,...a.t],i:a.i}}{const a=e;return{t:[...r,...a.t],i:a.i.i}}}))},f=(r,e,a)=>r.flatMap(r=>"string"==typeof r?[{t:[],i:r}]:Array.isArray(r)?Array.isArray(r[1])?u(r,e,a):d(r,e):s(r,e,a)),u=(r,e,a)=>{const i=r[0],o=r[1],s=[];return o.map(r=>{var e,a;const t=null!==(e=r[0].match(n))&&void 0!==e?e:[],i=null!==(a=(""+r[1]).match(n))&&void 0!==a?a:[];t.map(r=>s.push([r,0])),i.map(r=>s.push([r,1]))}),t(s.map(r=>{const e=r[0],t=r[1],i=e.slice(1,-1);return Object.keys(a[i]).map(r=>[e,r,a[i][r],t])})).map(r=>{let a=0,t=r[a];return{t:[],i:[r.reduce((r,a)=>0===a[3]?e.addPropertyToSelector(r,a[1]):e.addValueToSelector(r,a[1]),i),o.map(e=>{const i=e=>{for(;a<r.length&&e.includes(t[0]);)e=e.replace(t[0],""+t[2]),t=r[++a];return e};return[i(e[0]),i(""+e[1])]})]}})},d=(r,e)=>{const a=r[1],t=e.abbreviateProperty(r[0]),i=t[0],n=t[1];return Object.keys(a).map(r=>({t:[],i:[e.addValueToSelector(e.addPropertyToSelector("",i),r),[[n,a[r]]]]}))},l=r=>{const e="?+".indexOf(r[0])+1;return[e,e>0?r.slice(1):r]};var v=Function.prototype.toString,c=Object.create,h=Object.defineProperty,m=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,y=Object.getOwnPropertySymbols,g=Object.getPrototypeOf,E=Object.prototype,b=E.hasOwnProperty,w=E.propertyIsEnumerable,F="function"==typeof y,P="function"==typeof WeakMap,$=function(r,e){if(!r.constructor)return c(null);var a=r.constructor,t=r.__proto__||g(r);if(a===e.Object)return t===e.Object.prototype?{}:c(t);if(~v.call(a).indexOf("[native code]"))try{return new a}catch(r){}return c(t)},j=function(r,e,a,t){var i=$(r,e);for(var n in t.set(r,i),r)b.call(r,n)&&(i[n]=a(r[n],t));if(F){var o=y(r),s=o.length;if(s)for(var f=0,u=void 0;f<s;f++)w.call(r,u=o[f])&&(i[u]=a(r[u],t))}return i},O=function(r,e,a,t){var i=$(r,e);t.set(r,i);var n=F?p(r).concat(y(r)):p(r),o=n.length;if(o)for(var s=0,f=void 0,u=void 0;s<o;s++)"callee"!==(f=n[s])&&"caller"!==f&&((u=m(r,f)).value=a(r[f],t),h(i,f,u));return i},x=Array.isArray,D="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void(console&&console.error&&console.error('Unable to locate global object, returning "this".'));function A(r,e){var a=!(!e||!e.isStrict),t=e&&e.realm||D,i=a?O:j,n=function(r,e){if(!r||"object"!=typeof r)return r;if(e.has(r))return e.get(r);var o,s,f,u=r.constructor;if(u===t.Object)return i(r,t,n,e);if(x(r)){if(a)return O(r,t,n,e);var d=r.length;o=new u,e.set(r,o);for(var l=0;l<d;l++)o[l]=n(r[l],e);return o}if(r instanceof t.Date)return new u(r.getTime());if(r instanceof t.RegExp)return(o=new u(r.source,r.flags||(f="",(s=r).global&&(f+="g"),s.ignoreCase&&(f+="i"),s.multiline&&(f+="m"),s.unicode&&(f+="u"),s.sticky&&(f+="y"),f))).lastIndex=r.lastIndex,o;if(t.Map&&r instanceof t.Map)return o=new u,e.set(r,o),r.forEach((function(r,a){o.set(a,n(r,e))})),o;if(t.Set&&r instanceof t.Set)return o=new u,e.set(r,o),r.forEach((function(r){o.add(n(r,e))})),o;if(t.Buffer&&t.Buffer.isBuffer(r))return o=t.Buffer.allocUnsafe?t.Buffer.allocUnsafe(r.length):new u(r.length),e.set(r,o),r.copy(o),o;if(t.ArrayBuffer){if(t.ArrayBuffer.isView(r))return o=new u(r.buffer.slice(0)),e.set(r,o),o;if(r instanceof t.ArrayBuffer)return o=r.slice(0),e.set(r,o),o}return"function"==typeof r.then||r instanceof Error||t.WeakMap&&r instanceof t.WeakMap||t.WeakSet&&r instanceof t.WeakSet?r:i(r,t,n,e)};return n(r,function(){if(P)return new WeakMap;var r=c({has:function(e){return!!~r._keys.indexOf(e)},set:function(e,a){r._keys.push(e),r._values.push(a)},get:function(e){return r._values[r._keys.indexOf(e)]}});return r._keys=[],r._values=[],r}())}A.strict=function(r,e){return A(r,{isStrict:!0,realm:e?e.realm:void 0})};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function I(r,e){return r(e={exports:{}},e.exports),e.exports}function S(r){return r&&r.default||r}var k,_=I((function(r,e){!function(r){function e(){for(var r=arguments.length,e=Array(r),a=0;a<r;a++)e[a]=arguments[a];if(e.length>1){e[0]=e[0].slice(0,-1);for(var t=e.length-1,i=1;i<t;++i)e[i]=e[i].slice(1,-1);return e[t]=e[t].slice(1),e.join("")}return e[0]}function a(r){return"(?:"+r+")"}function t(r){return void 0===r?"undefined":null===r?"null":Object.prototype.toString.call(r).split(" ").pop().split("]").shift().toLowerCase()}function i(r){return r.toUpperCase()}function n(r){var t=e("[0-9]","[A-Fa-f]"),i=a(a("%[EFef]"+t+"%"+t+t+"%"+t+t)+"|"+a("%[89A-Fa-f]"+t+"%"+t+t)+"|"+a("%"+t+t)),n="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",o=e("[\\:\\/\\?\\#\\[\\]\\@]",n),s=r?"[\\uE000-\\uF8FF]":"[]",f=e("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",r?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),u=(a("[A-Za-z]"+e("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),a(a(i+"|"+e(f,n,"[\\:]"))+"*"),a(a("25[0-5]")+"|"+a("2[0-4][0-9]")+"|"+a("1[0-9][0-9]")+"|"+a("0?[1-9][0-9]")+"|0?0?[0-9]")),d=a(u+"\\."+u+"\\."+u+"\\."+u),l=a(t+"{1,4}"),v=a(a(l+"\\:"+l)+"|"+d),c=a(a(l+"\\:")+"{6}"+v),h=a("\\:\\:"+a(l+"\\:")+"{5}"+v),m=a(a(l)+"?\\:\\:"+a(l+"\\:")+"{4}"+v),p=a(a(a(l+"\\:")+"{0,1}"+l)+"?\\:\\:"+a(l+"\\:")+"{3}"+v),y=a(a(a(l+"\\:")+"{0,2}"+l)+"?\\:\\:"+a(l+"\\:")+"{2}"+v),g=a(a(a(l+"\\:")+"{0,3}"+l)+"?\\:\\:"+l+"\\:"+v),E=a(a(a(l+"\\:")+"{0,4}"+l)+"?\\:\\:"+v),b=a(a(a(l+"\\:")+"{0,5}"+l)+"?\\:\\:"+l),w=a(a(a(l+"\\:")+"{0,6}"+l)+"?\\:\\:"),F=a([c,h,m,p,y,g,E,b,w].join("|")),P=a(a(f+"|"+i)+"+"),$=(a("[vV]"+t+"+\\."+e(f,n,"[\\:]")+"+"),a(a(i+"|"+e(f,n))+"*"),a(i+"|"+e(f,n,"[\\:\\@]")));return a(a(i+"|"+e(f,n,"[\\@]"))+"+"),a(a($+"|"+e("[\\/\\?]",s))+"*"),{NOT_SCHEME:RegExp(e("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:RegExp(e("[^\\%\\:]",f,n),"g"),NOT_HOST:RegExp(e("[^\\%\\[\\]\\:]",f,n),"g"),NOT_PATH:RegExp(e("[^\\%\\/\\:\\@]",f,n),"g"),NOT_PATH_NOSCHEME:RegExp(e("[^\\%\\/\\@]",f,n),"g"),NOT_QUERY:RegExp(e("[^\\%]",f,n,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:RegExp(e("[^\\%]",f,n,"[\\:\\@\\/\\?]"),"g"),ESCAPE:RegExp(e("[^]",f,n),"g"),UNRESERVED:RegExp(f,"g"),OTHER_CHARS:RegExp(e("[^\\%]",f,o),"g"),PCT_ENCODED:RegExp(i,"g"),IPV4ADDRESS:RegExp("^("+d+")$"),IPV6ADDRESS:RegExp("^\\[?("+F+")"+a(a("\\%25|\\%(?!"+t+"{2})")+"("+P+")")+"?\\]?$")}}var o=n(!1),s=n(!0),f=function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,e){var a=[],t=!0,i=!1,n=void 0;try{for(var o,s=r[Symbol.iterator]();!(t=(o=s.next()).done)&&(a.push(o.value),!e||a.length!==e);t=!0);}catch(r){i=!0,n=r}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}return a}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=2147483647,d=/^xn--/,l=/[^\0-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,m=String.fromCharCode;function p(r){throw new RangeError(c[r])}function y(r,e){var a=r.split("@"),t="";a.length>1&&(t=a[0]+"@",r=a[1]);var i=function(r,e){for(var a=[],t=r.length;t--;)a[t]=e(r[t]);return a}((r=r.replace(v,".")).split("."),e).join(".");return t+i}function g(r){for(var e=[],a=0,t=r.length;a<t;){var i=r.charCodeAt(a++);if(i>=55296&&i<=56319&&a<t){var n=r.charCodeAt(a++);56320==(64512&n)?e.push(((1023&i)<<10)+(1023&n)+65536):(e.push(i),a--)}else e.push(i)}return e}var E=function(r,e){return r+22+75*(r<26)-((0!=e)<<5)},b=function(r,e,a){var t=0;for(r=a?h(r/700):r>>1,r+=h(r/e);r>455;t+=36)r=h(r/35);return h(t+36*r/(r+38))},w=function(r){var e,a=[],t=r.length,i=0,n=128,o=72,s=r.lastIndexOf("-");s<0&&(s=0);for(var f=0;f<s;++f)r.charCodeAt(f)>=128&&p("not-basic"),a.push(r.charCodeAt(f));for(var d=s>0?s+1:0;d<t;){for(var l=i,v=1,c=36;;c+=36){d>=t&&p("invalid-input");var m=(e=r.charCodeAt(d++))-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36;(m>=36||m>h((u-i)/v))&&p("overflow"),i+=m*v;var y=c<=o?1:c>=o+26?26:c-o;if(m<y)break;var g=36-y;v>h(u/g)&&p("overflow"),v*=g}var E=a.length+1;o=b(i-l,E,0==l),h(i/E)>u-n&&p("overflow"),n+=h(i/E),i%=E,a.splice(i++,0,n)}return String.fromCodePoint.apply(String,a)},F=function(r){var e=[],a=(r=g(r)).length,t=128,i=0,n=72,o=!0,s=!1,f=void 0;try{for(var d,l=r[Symbol.iterator]();!(o=(d=l.next()).done);o=!0){var v=d.value;v<128&&e.push(m(v))}}catch(r){s=!0,f=r}finally{try{!o&&l.return&&l.return()}finally{if(s)throw f}}var c=e.length,y=c;for(c&&e.push("-");y<a;){var w=u,F=!0,P=!1,$=void 0;try{for(var j,O=r[Symbol.iterator]();!(F=(j=O.next()).done);F=!0){var x=j.value;x>=t&&x<w&&(w=x)}}catch(r){P=!0,$=r}finally{try{!F&&O.return&&O.return()}finally{if(P)throw $}}var D=y+1;w-t>h((u-i)/D)&&p("overflow"),i+=(w-t)*D,t=w;var A=!0,I=!1,S=void 0;try{for(var k,_=r[Symbol.iterator]();!(A=(k=_.next()).done);A=!0){var z=k.value;if(z<t&&++i>u&&p("overflow"),z==t){for(var R=i,V=36;;V+=36){var N=V<=n?1:V>=n+26?26:V-n;if(R<N)break;var C=R-N,T=36-N;e.push(m(E(N+C%T,0))),R=h(C/T)}e.push(m(E(R,0))),n=b(i,D,y==c),i=0,++y}}}catch(r){I=!0,S=r}finally{try{!A&&_.return&&_.return()}finally{if(I)throw S}}++i,++t}return e.join("")},P=function(r){return y(r,(function(r){return l.test(r)?"xn--"+F(r):r}))},$=function(r){return y(r,(function(r){return d.test(r)?w(r.slice(4).toLowerCase()):r}))},j={};function O(r){var e=r.charCodeAt(0);return e<16?"%0"+e.toString(16).toUpperCase():e<128?"%"+e.toString(16).toUpperCase():e<2048?"%"+(e>>6|192).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase():"%"+(e>>12|224).toString(16).toUpperCase()+"%"+(e>>6&63|128).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase()}function x(r){for(var e="",a=0,t=r.length;a<t;){var i=parseInt(r.substr(a+1,2),16);if(i<128)e+=String.fromCharCode(i),a+=3;else if(i>=194&&i<224){if(t-a>=6){var n=parseInt(r.substr(a+4,2),16);e+=String.fromCharCode((31&i)<<6|63&n)}else e+=r.substr(a,6);a+=6}else if(i>=224){if(t-a>=9){var o=parseInt(r.substr(a+4,2),16),s=parseInt(r.substr(a+7,2),16);e+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}else e+=r.substr(a,9);a+=9}else e+=r.substr(a,3),a+=3}return e}function D(r,e){function a(r){var a=x(r);return a.match(e.UNRESERVED)?a:r}return r.scheme&&(r.scheme=(r.scheme+"").replace(e.PCT_ENCODED,a).toLowerCase().replace(e.NOT_SCHEME,"")),void 0!==r.userinfo&&(r.userinfo=(r.userinfo+"").replace(e.PCT_ENCODED,a).replace(e.NOT_USERINFO,O).replace(e.PCT_ENCODED,i)),void 0!==r.host&&(r.host=(r.host+"").replace(e.PCT_ENCODED,a).toLowerCase().replace(e.NOT_HOST,O).replace(e.PCT_ENCODED,i)),void 0!==r.path&&(r.path=(r.path+"").replace(e.PCT_ENCODED,a).replace(r.scheme?e.NOT_PATH:e.NOT_PATH_NOSCHEME,O).replace(e.PCT_ENCODED,i)),void 0!==r.query&&(r.query=(r.query+"").replace(e.PCT_ENCODED,a).replace(e.NOT_QUERY,O).replace(e.PCT_ENCODED,i)),void 0!==r.fragment&&(r.fragment=(r.fragment+"").replace(e.PCT_ENCODED,a).replace(e.NOT_FRAGMENT,O).replace(e.PCT_ENCODED,i)),r}function A(r){return r.replace(/^0*(.*)/,"$1")||"0"}function I(r,e){var a=r.match(e.IPV4ADDRESS)||[],t=f(a,2)[1];return t?t.split(".").map(A).join("."):r}function S(r,e){var a=r.match(e.IPV6ADDRESS)||[],t=f(a,3),i=t[1],n=t[2];if(i){for(var o=i.toLowerCase().split("::").reverse(),s=f(o,2),u=s[0],d=s[1],l=d?d.split(":").map(A):[],v=u.split(":").map(A),c=e.IPV4ADDRESS.test(v[v.length-1]),h=c?7:8,m=v.length-h,p=Array(h),y=0;y<h;++y)p[y]=l[y]||v[m+y]||"";c&&(p[h-1]=I(p[h-1],e));var g=p.reduce((function(r,e,a){if(!e||"0"===e){var t=r[r.length-1];t&&t.index+t.length===a?t.length++:r.push({index:a,length:1})}return r}),[]).sort((function(r,e){return e.length-r.length}))[0],E=void 0;if(g&&g.length>1){var b=p.slice(0,g.index),w=p.slice(g.index+g.length);E=b.join(":")+"::"+w.join(":")}else E=p.join(":");return n&&(E+="%"+n),E}return r}var k=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,_=void 0==="".match(/(){0}/)[1];function z(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={},t=!1!==e.iri?s:o;"suffix"===e.reference&&(r=(e.scheme?e.scheme+":":"")+"//"+r);var i=r.match(k);if(i){_?(a.scheme=i[1],a.userinfo=i[3],a.host=i[4],a.port=parseInt(i[5],10),a.path=i[6]||"",a.query=i[7],a.fragment=i[8],isNaN(a.port)&&(a.port=i[5])):(a.scheme=i[1]||void 0,a.userinfo=-1!==r.indexOf("@")?i[3]:void 0,a.host=-1!==r.indexOf("//")?i[4]:void 0,a.port=parseInt(i[5],10),a.path=i[6]||"",a.query=-1!==r.indexOf("?")?i[7]:void 0,a.fragment=-1!==r.indexOf("#")?i[8]:void 0,isNaN(a.port)&&(a.port=r.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),a.host&&(a.host=S(I(a.host,t),t)),a.reference=void 0!==a.scheme||void 0!==a.userinfo||void 0!==a.host||void 0!==a.port||a.path||void 0!==a.query?void 0===a.scheme?"relative":void 0===a.fragment?"absolute":"uri":"same-document",e.reference&&"suffix"!==e.reference&&e.reference!==a.reference&&(a.error=a.error||"URI is not a "+e.reference+" reference.");var n=j[(e.scheme||a.scheme||"").toLowerCase()];if(e.unicodeSupport||n&&n.unicodeSupport)D(a,t);else{if(a.host&&(e.domainHost||n&&n.domainHost))try{a.host=P(a.host.replace(t.PCT_ENCODED,x).toLowerCase())}catch(r){a.error=a.error||"Host's domain name can not be converted to ASCII via punycode: "+r}D(a,o)}n&&n.parse&&n.parse(a,e)}else a.error=a.error||"URI can not be parsed.";return a}function R(r,e){var a=!1!==e.iri?s:o,t=[];return void 0!==r.userinfo&&(t.push(r.userinfo),t.push("@")),void 0!==r.host&&t.push(S(I(r.host+"",a),a).replace(a.IPV6ADDRESS,(function(r,e,a){return"["+e+(a?"%25"+a:"")+"]"}))),"number"==typeof r.port&&(t.push(":"),t.push(r.port.toString(10))),t.length?t.join(""):void 0}var V=/^\.\.?\//,N=/^\/\.(\/|$)/,C=/^\/\.\.(\/|$)/,T=/^\/?(?:.|\n)*?(?=\/|$)/;function q(r){for(var e=[];r.length;)if(r.match(V))r=r.replace(V,"");else if(r.match(N))r=r.replace(N,"/");else if(r.match(C))r=r.replace(C,"/"),e.pop();else if("."===r||".."===r)r="";else{var a=r.match(T);if(!a)throw Error("Unexpected dot segment condition");var t=a[0];r=r.slice(t.length),e.push(t)}return e.join("")}function M(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.iri?s:o,t=[],i=j[(e.scheme||r.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(r,e),r.host)if(a.IPV6ADDRESS.test(r.host));else if(e.domainHost||i&&i.domainHost)try{r.host=e.iri?$(r.host):P(r.host.replace(a.PCT_ENCODED,x).toLowerCase())}catch(a){r.error=r.error||"Host's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+a}D(r,a),"suffix"!==e.reference&&r.scheme&&(t.push(r.scheme),t.push(":"));var n=R(r,e);if(void 0!==n&&("suffix"!==e.reference&&t.push("//"),t.push(n),r.path&&"/"!==r.path.charAt(0)&&t.push("/")),void 0!==r.path){var f=r.path;e.absolutePath||i&&i.absolutePath||(f=q(f)),void 0===n&&(f=f.replace(/^\/\//,"/%2F")),t.push(f)}return void 0!==r.query&&(t.push("?"),t.push(r.query)),void 0!==r.fragment&&(t.push("#"),t.push(r.fragment)),t.join("")}function U(r,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=arguments[3],i={};return t||(r=z(M(r,a),a),e=z(M(e,a),a)),!(a=a||{}).tolerant&&e.scheme?(i.scheme=e.scheme,i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=q(e.path||""),i.query=e.query):(void 0!==e.userinfo||void 0!==e.host||void 0!==e.port?(i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=q(e.path||""),i.query=e.query):(e.path?("/"===e.path.charAt(0)?i.path=q(e.path):(i.path=void 0===r.userinfo&&void 0===r.host&&void 0===r.port||r.path?r.path?r.path.slice(0,r.path.lastIndexOf("/")+1)+e.path:e.path:"/"+e.path,i.path=q(i.path)),i.query=e.query):(i.path=r.path,i.query=void 0!==e.query?e.query:r.query),i.userinfo=r.userinfo,i.host=r.host,i.port=r.port),i.scheme=r.scheme),i.fragment=e.fragment,i}function B(r,e){return r&&(""+r).replace(e&&e.iri?s.PCT_ENCODED:o.PCT_ENCODED,x)}var L={scheme:"http",domainHost:!0,parse:function(r,e){return r.host||(r.error=r.error||"HTTP URIs must have a host."),r},serialize:function(r,e){return r.port!==("https"!==(r.scheme+"").toLowerCase()?80:443)&&""!==r.port||(r.port=void 0),r.path||(r.path="/"),r}},H={scheme:"https",domainHost:L.domainHost,parse:L.parse,serialize:L.serialize},J={},Z="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",K="[0-9A-Fa-f]",Q=a(a("%[EFef]"+K+"%"+K+K+"%"+K+K)+"|"+a("%[89A-Fa-f]"+K+"%"+K+K)+"|"+a("%"+K+K)),W=e("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),G=/[A-Za-z0-9\-\.\_\~\xA0-\u200D\u2010-\u2029\u202F-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]/g,Y=RegExp(Q,"g"),X=RegExp(e("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',W),"g"),rr=RegExp(e("[^]",Z,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),er=rr;function ar(r){var e=x(r);return e.match(G)?e:r}var tr={scheme:"mailto",parse:function(r,e){var a=r,t=a.to=a.path?a.path.split(","):[];if(a.path=void 0,a.query){for(var i=!1,n={},o=a.query.split("&"),s=0,f=o.length;s<f;++s){var u=o[s].split("=");switch(u[0]){case"to":for(var d=u[1].split(","),l=0,v=d.length;l<v;++l)t.push(d[l]);break;case"subject":a.subject=B(u[1],e);break;case"body":a.body=B(u[1],e);break;default:i=!0,n[B(u[0],e)]=B(u[1],e)}}i&&(a.headers=n)}a.query=void 0;for(var c=0,h=t.length;c<h;++c){var m=t[c].split("@");if(m[0]=B(m[0]),e.unicodeSupport)m[1]=B(m[1],e).toLowerCase();else try{m[1]=P(B(m[1],e).toLowerCase())}catch(r){a.error=a.error||"Email address's domain name can not be converted to ASCII via punycode: "+r}t[c]=m.join("@")}return a},serialize:function(r,e){var a,t=r,n=null!=(a=r.to)?a instanceof Array?a:"number"!=typeof a.length||a.split||a.setInterval||a.call?[a]:Array.prototype.slice.call(a):[];if(n){for(var o=0,s=n.length;o<s;++o){var f=n[o]+"",u=f.lastIndexOf("@"),d=f.slice(0,u).replace(Y,ar).replace(Y,i).replace(X,O),l=f.slice(u+1);try{l=e.iri?$(l):P(B(l,e).toLowerCase())}catch(r){t.error=t.error||"Email address's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+r}n[o]=d+"@"+l}t.path=n.join(",")}var v=r.headers=r.headers||{};r.subject&&(v.subject=r.subject),r.body&&(v.body=r.body);var c=[];for(var h in v)v[h]!==J[h]&&c.push(h.replace(Y,ar).replace(Y,i).replace(rr,O)+"="+v[h].replace(Y,ar).replace(Y,i).replace(er,O));return c.length&&(t.query=c.join("&")),t}},ir=/^([^\:]+)\:(.*)/,nr={scheme:"urn",parse:function(r,e){var a=r.path&&r.path.match(ir),t=r;if(a){var i=e.scheme||t.scheme||"urn",n=a[1].toLowerCase(),o=a[2],s=j[i+":"+(e.nid||n)];t.nid=n,t.nss=o,t.path=void 0,s&&(t=s.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t},serialize:function(r,e){var a=r.nid,t=j[(e.scheme||r.scheme||"urn")+":"+(e.nid||a)];t&&(r=t.serialize(r,e));var i=r;return i.path=(a||e.nid)+":"+r.nss,i}},or=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,sr={scheme:"urn:uuid",parse:function(r,e){var a=r;return a.uuid=a.nss,a.nss=void 0,e.tolerant||a.uuid&&a.uuid.match(or)||(a.error=a.error||"UUID is not valid."),a},serialize:function(r,e){var a=r;return a.nss=(r.uuid||"").toLowerCase(),a}};j[L.scheme]=L,j[H.scheme]=H,j[tr.scheme]=tr,j[nr.scheme]=nr,j[sr.scheme]=sr,r.SCHEMES=j,r.pctEncChar=O,r.pctDecChars=x,r.parse=z,r.removeDotSegments=q,r.serialize=M,r.resolveComponents=U,r.resolve=function(r,e,a){var t=function(r,e){var a=r;if(e)for(var t in e)a[t]=e[t];return a}({scheme:"null"},a);return M(U(z(r,t),z(e,t),t,!0),t)},r.normalize=function(r,e){return"string"==typeof r?r=M(z(r,e),e):"object"===t(r)&&(r=z(M(r,e),e)),r},r.equal=function(r,e,a){return"string"==typeof r?r=M(z(r,a),a):"object"===t(r)&&(r=M(r,a)),"string"==typeof e?e=M(z(e,a),a):"object"===t(e)&&(e=M(e,a)),r===e},r.escapeComponent=function(r,e){return r&&(""+r).replace(e&&e.iri?s.ESCAPE:o.ESCAPE,O)},r.unescapeComponent=B,Object.defineProperty(r,"__esModule",{value:!0})}(e)}));(k=_)&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default");var z=function r(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var t,i,n;if(Array.isArray(e)){if((t=e.length)!=a.length)return!1;for(i=t;0!=i--;)if(!r(e[i],a[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return""+e==""+a;if((t=(n=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(i=t;0!=i--;)if(!Object.prototype.hasOwnProperty.call(a,n[i]))return!1;for(i=t;0!=i--;){var o=n[i];if(!r(e[o],a[o]))return!1}return!0}return e!=e&&a!=a},R={copy:function(r,e){for(var a in e=e||{},r)e[a]=r[a];return e},checkDataType:V,checkDataTypes:function(r,e){switch(r.length){case 1:return V(r[0],e,!0);default:var a="",t=C(r);for(var i in t.array&&t.object&&(a=t.null?"(":"(!"+e+" || ",a+="typeof "+e+' !== "object")',delete t.null,delete t.array,delete t.object),t.number&&delete t.integer,t)a+=(a?" && ":"")+V(i,e,!0);return a}},coerceToTypes:function(r,e){if(Array.isArray(e)){for(var a=[],t=0;t<e.length;t++){var i=e[t];(N[i]||"array"===r&&"array"===i)&&(a[a.length]=i)}if(a.length)return a}else{if(N[e])return[e];if("array"===r&&"array"===e)return["array"]}},toHash:C,getProperty:M,escapeQuotes:U,equal:z,ucs2length:function(r){for(var e,a=0,t=r.length,i=0;i<t;)a++,(e=r.charCodeAt(i++))>=55296&&e<=56319&&i<t&&56320==(64512&(e=r.charCodeAt(i)))&&i++;return a},varOccurences:function(r,e){var a=r.match(RegExp(e+="[^0-9]","g"));return a?a.length:0},varReplace:function(r,e,a){return e+="([^0-9])",a=a.replace(/\$/g,"$$$$"),r.replace(RegExp(e,"g"),a+"$1")},cleanUpCode:function(r){return r.replace(B,"").replace(L,"").replace(H,"if (!($1))")},finalCleanUpCode:function(r,e){var a=r.match(J);a&&2==a.length&&(r=e?r.replace(K,"").replace(Q,"return data;"):r.replace(Z,"").replace("return errors === 0;","validate.errors = null; return true;"));return(a=r.match(W))&&3===a.length?r.replace(G,""):r},schemaHasRules:function(r,e){if("boolean"==typeof r)return!r;for(var a in r)if(e[a])return!0},schemaHasRulesExcept:function(r,e,a){if("boolean"==typeof r)return!r&&"not"!=a;for(var t in r)if(t!=a&&e[t])return!0},schemaUnknownRules:function(r,e){if("boolean"==typeof r)return;for(var a in r)if(!e[a])return a},toQuotedString:Y,getPathExpr:function(r,e,a,t){return er(r,a?"'/' + "+e+(t?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):t?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'")},getPath:function(r,e,a){var t=Y(a?"/"+ar(e):M(e));return er(r,t)},getData:function(r,e,a){var t,i,n,o;if(""===r)return"rootData";if("/"==r[0]){if(!X.test(r))throw Error("Invalid JSON-pointer: "+r);i=r,n="rootData"}else{if(!(o=r.match(rr)))throw Error("Invalid JSON-pointer: "+r);if(t=+o[1],"#"==(i=o[2])){if(t>=e)throw Error("Cannot access property/index "+t+" levels up, current level is "+e);return a[e-t]}if(t>e)throw Error("Cannot access data "+t+" levels up, current level is "+e);if(n="data"+(e-t||""),!i)return n}for(var s=n,f=i.split("/"),u=0;u<f.length;u++){var d=f[u];d&&(n+=M(tr(d)),s+=" && "+n)}return s},unescapeFragment:function(r){return tr(decodeURIComponent(r))},unescapeJsonPointer:tr,escapeFragment:function(r){return encodeURIComponent(ar(r))},escapeJsonPointer:ar};function V(r,e,a){var t=a?" !== ":" === ",i=a?" || ":" && ",n=a?"!":"",o=a?"":"!";switch(r){case"null":return e+t+"null";case"array":return n+"Array.isArray("+e+")";case"object":return"("+n+e+i+"typeof "+e+t+'"object"'+i+o+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+t+'"number"'+i+o+"("+e+" % 1)"+i+e+t+e+")";default:return"typeof "+e+t+'"'+r+'"'}}var N=C(["string","number","integer","boolean","null"]);function C(r){for(var e={},a=0;a<r.length;a++)e[r[a]]=!0;return e}var T=/^[a-z$_][a-z$_0-9]*$/i,q=/'|\\/g;function M(r){return"number"==typeof r?"["+r+"]":T.test(r)?"."+r:"['"+U(r)+"']"}function U(r){return r.replace(q,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var B=/else\s*{\s*}/g,L=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,H=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var J=/[^v.]errors/g,Z=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,K=/var errors = 0;|var vErrors = null;/g,Q=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,W=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,G=/if \(rootData === undefined\) rootData = data;/;function Y(r){return"'"+U(r)+"'"}var X=/^\/(?:[^~]|~0|~1)*$/,rr=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function er(r,e){return'""'==r?e:(r+" + "+e).replace(/' \+ '/g,"")}function ar(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}function tr(r){return r.replace(/~1/g,"/").replace(/~0/g,"~")}var ir=function(r){R.copy(r,this)};var nr=I((function(r){var e=r.exports=function(r,a,t){"function"==typeof a&&(t=a,a={}),function r(a,t,i,n,o,s,f,u,d,l){if(n&&"object"==typeof n&&!Array.isArray(n)){for(var v in t(n,o,s,f,u,d,l),n){var c=n[v];if(Array.isArray(c)){if(v in e.arrayKeywords)for(var h=0;h<c.length;h++)r(a,t,i,c[h],o+"/"+v+"/"+h,s,o,v,n,h)}else if(v in e.propsKeywords){if(c&&"object"==typeof c)for(var m in c)r(a,t,i,c[m],o+"/"+v+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),s,o,v,n,m)}else(v in e.keywords||a.allKeys&&!(v in e.skipKeywords))&&r(a,t,i,c,o+"/"+v,s,o,v,n)}i(n,o,s,f,u,d,l)}}(a,"function"==typeof(t=a.cb||t)?t:t.pre||function(){},t.post||function(){},r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}})),or=sr;function sr(r,e,a){var t=this._refs[a];if("string"==typeof t){if(!this._refs[t])return sr.call(this,r,e,t);t=this._refs[t]}if((t=t||this._schemas[a])instanceof ir)return cr(t.schema,this._opts.inlineRefs)?t.schema:t.validate||this._compile(t);var i,n,o,s=fr.call(this,e,a);return s&&(i=s.schema,e=s.root,o=s.baseId),i instanceof ir?n=i.validate||r.call(this,i.schema,e,void 0,o):void 0!==i&&(n=cr(i,this._opts.inlineRefs)?i:r.call(this,i,e,void 0,o)),n}function fr(r,e){var a=_.parse(e),t=mr(a),i=hr(this._getId(r.schema));if(0===Object.keys(r.schema).length||t!==i){var n=yr(t),o=this._refs[n];if("string"==typeof o)return ur.call(this,r,o,a);if(o instanceof ir)o.validate||this._compile(o),r=o;else{if(!((o=this._schemas[n])instanceof ir))return;if(o.validate||this._compile(o),n==yr(e))return{schema:o,root:r,baseId:i};r=o}if(!r.schema)return;i=hr(this._getId(r.schema))}return lr.call(this,a,i,r.schema,r)}function ur(r,e,a){var t=fr.call(this,r,e);if(t){var i=t.schema,n=t.baseId;r=t.root;var o=this._getId(i);return o&&(n=gr(n,o)),lr.call(this,a,n,i,r)}}sr.normalizeId=yr,sr.fullPath=hr,sr.url=gr,sr.ids=function(r){var e=yr(this._getId(r)),a={"":e},t={"":hr(e,!1)},i={},n=this;return nr(r,{allKeys:!0},(function(r,e,o,s,f,u,d){if(""!==e){var l=n._getId(r),v=a[s],c=t[s]+"/"+f;if(void 0!==d&&(c+="/"+("number"==typeof d?d:R.escapeFragment(d))),"string"==typeof l){l=v=yr(v?_.resolve(v,l):l);var h=n._refs[l];if("string"==typeof h&&(h=n._refs[h]),h&&h.schema){if(!z(r,h.schema))throw Error('id "'+l+'" resolves to more than one schema')}else if(l!=yr(c))if("#"==l[0]){if(i[l]&&!z(r,i[l]))throw Error('id "'+l+'" resolves to more than one schema');i[l]=r}else n._refs[l]=c}a[e]=v,t[e]=c}})),i},sr.inlineRef=cr,sr.schema=fr;var dr=R.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function lr(r,e,a,t){if(r.fragment=r.fragment||"","/"==r.fragment.slice(0,1)){for(var i=r.fragment.split("/"),n=1;n<i.length;n++){var o=i[n];if(o){if(void 0===(a=a[o=R.unescapeFragment(o)]))break;var s;if(!dr[o]&&((s=this._getId(a))&&(e=gr(e,s)),a.o)){var f=gr(e,a.o),u=fr.call(this,t,f);u&&(a=u.schema,t=u.root,e=u.baseId)}}}return void 0!==a&&a!==t.schema?{schema:a,root:t,baseId:e}:void 0}}var vr=R.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function cr(r,e){return!1!==e&&(void 0===e||!0===e?function r(e){var a;if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("object"==typeof(a=e[t])&&!r(a))return!1}else for(var i in e){if("$ref"==i)return!1;if("object"==typeof(a=e[i])&&!r(a))return!1}return!0}(r):e?function r(e){var a,t=0;if(Array.isArray(e)){for(var i=0;i<e.length;i++)if("object"==typeof(a=e[i])&&(t+=r(a)),Infinity==t)return Infinity}else for(var n in e){if("$ref"==n)return Infinity;if(vr[n])t++;else if("object"==typeof(a=e[n])&&(t+=r(a)+1),Infinity==t)return Infinity}return t}(r)<=e:void 0)}function hr(r,e){return!1!==e&&(r=yr(r)),mr(_.parse(r))}function mr(r){return _.serialize(r).split("#")[0]+"#"}var pr=/#\/?$/;function yr(r){return r?r.replace(pr,""):""}function gr(r,e){return e=yr(e),_.resolve(r,e)}var Er={Validation:wr((function(r){this.message="validation failed",this.errors=r,this.ajv=this.validation=!0})),MissingRef:wr(br)};function br(r,e,a){this.message=a||br.message(r,e),this.missingRef=or.url(r,e),this.missingSchema=or.normalizeId(or.fullPath(this.missingRef))}function wr(r){return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}br.message=function(r,e){return"can't resolve reference "+e+" from id "+r};var Fr=function(r,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var a,t="boolean"==typeof e.cycles&&e.cycles,i=e.cmp&&(a=e.cmp,function(r){return function(e,t){return a({key:e,value:r[e]},{key:t,value:r[t]})}}),n=[];return function r(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var a,o;if(Array.isArray(e)){for(o="[",a=0;a<e.length;a++)a&&(o+=","),o+=r(e[a])||"null";return o+"]"}if(null===e)return"null";if(-1!==n.indexOf(e)){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=n.push(e)-1,f=Object.keys(e).sort(i&&i(e));for(o="",a=0;a<f.length;a++){var u=f[a],d=r(e[u]);d&&(o&&(o+=","),o+=JSON.stringify(u)+":"+d)}return n.splice(s,1),"{"+o+"}"}}(r)},Pr=function(r,e,a){var t="",i=!0===r.schema.s,n=r.util.schemaHasRulesExcept(r.schema,r.RULES.all,"$ref"),o=r.self._getId(r.schema);if(r.opts.strictKeywords){var s=r.util.schemaUnknownRules(r.schema,r.RULES.keywords);if(s){var f="unknown keyword: "+s;if("log"!==r.opts.strictKeywords)throw Error(f);r.logger.warn(f)}}if(r.isTop&&(t+=" var validate = ",i&&(r.async=!0,t+="async "),t+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(r.opts.sourceCode||r.opts.processCode)&&(t+=" /*# sourceURL="+o+" */ ")),"boolean"==typeof r.schema||!n&&!r.schema.o){var u=r.level,d=r.dataLevel,l=r.schema["false schema"],v=r.schemaPath+r.util.getProperty("false schema"),c=r.errSchemaPath+"/false schema",h=!r.opts.allErrors,m="data"+(d||""),p="valid"+u;if(!1===r.schema){r.isTop?h=!0:t+=" var "+p+" = false; ",(W=W||[]).push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(c)+" , params: {} ",!1!==r.opts.messages&&(t+=" , message: 'boolean schema is false' "),r.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+r.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var y=t;t=W.pop(),t+=!r.compositeRule&&h?r.async?" throw new ValidationError(["+y+"]); ":" validate.errors = ["+y+"]; return false; ":" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else t+=r.isTop?i?" return data; ":" validate.errors = null; return true; ":" var "+p+" = true; ";return r.isTop&&(t+=" }; return validate; "),t}if(r.isTop){var g=r.isTop;u=r.level=0,d=r.dataLevel=0,m="data";if(r.rootId=r.resolve.fullPath(r.self._getId(r.root.schema)),r.baseId=r.baseId||r.rootId,delete r.isTop,r.dataPathArr=[void 0],void 0!==r.schema.default&&r.opts.useDefaults&&r.opts.strictDefaults){var E="default is ignored in the schema root";if("log"!==r.opts.strictDefaults)throw Error(E);r.logger.warn(E)}t+=" var vErrors = null; ",t+=" var errors = 0;     ",t+=" if (rootData === undefined) rootData = data; "}else{u=r.level,m="data"+((d=r.dataLevel)||"");if(o&&(r.baseId=r.resolve.url(r.baseId,o)),i&&!r.async)throw Error("async schema in sync schema");t+=" var errs_"+u+" = errors;"}p="valid"+u,h=!r.opts.allErrors;var b="",w="",F=r.schema.type,P=Array.isArray(F);if(F&&r.opts.nullable&&!0===r.schema.nullable&&(P?-1==F.indexOf("null")&&(F=F.concat("null")):"null"!=F&&(F=[F,"null"],P=!0)),P&&1==F.length&&(F=F[0],P=!1),r.schema.o&&n){if("fail"==r.opts.extendRefs)throw Error('$ref: validation keywords used in schema at path "'+r.errSchemaPath+'" (see option extendRefs)');!0!==r.opts.extendRefs&&(n=!1,r.logger.warn('$ref: keywords ignored in schema at path "'+r.errSchemaPath+'"'))}if(r.schema.u&&r.opts.u&&(t+=" "+r.RULES.all.u.code(r,"$comment")),F){if(r.opts.coerceTypes)var $=r.util.coerceToTypes(r.opts.coerceTypes,F);var j=r.RULES.types[F];if($||P||!0===j||j&&!G(j)){v=r.schemaPath+".type",c=r.errSchemaPath+"/type",v=r.schemaPath+".type",c=r.errSchemaPath+"/type";if(t+=" if ("+r.util[P?"checkDataTypes":"checkDataType"](F,m,!0)+") { ",$){var O="dataType"+u,x="coerced"+u;t+=" var "+O+" = typeof "+m+"; ","array"==r.opts.coerceTypes&&(t+=" if ("+O+" == 'object' && Array.isArray("+m+")) "+O+" = 'array'; "),t+=" var "+x+" = undefined; ";var D="",A=$;if(A)for(var I,S=-1,k=A.length-1;S<k;)I=A[S+=1],S&&(t+=" if ("+x+" === undefined) { ",D+="}"),"array"==r.opts.coerceTypes&&"array"!=I&&(t+=" if ("+O+" == 'array' && "+m+".length == 1) { "+x+" = "+m+" = "+m+"[0]; "+O+" = typeof "+m+";  } "),"string"==I?t+=" if ("+O+" == 'number' || "+O+" == 'boolean') "+x+" = '' + "+m+"; else if ("+m+" === null) "+x+" = ''; ":"number"==I||"integer"==I?(t+=" if ("+O+" == 'boolean' || "+m+" === null || ("+O+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==I&&(t+=" && !("+m+" % 1)"),t+=")) "+x+" = +"+m+"; "):"boolean"==I?t+=" if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+x+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+x+" = true; ":"null"==I?t+=" if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+x+" = null; ":"array"==r.opts.coerceTypes&&"array"==I&&(t+=" if ("+O+" == 'string' || "+O+" == 'number' || "+O+" == 'boolean' || "+m+" == null) "+x+" = ["+m+"]; ");(W=W||[]).push(t+=" "+D+" if ("+x+" === undefined) {   "),t="",!1!==r.createErrors?(t+=" { keyword: 'type' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(c)+" , params: { type: '",t+=P?""+F.join(","):""+F,t+="' } ",!1!==r.opts.messages&&(t+=" , message: 'should be ",t+=P?""+F.join(","):""+F,t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";y=t;t=W.pop(),t+=!r.compositeRule&&h?r.async?" throw new ValidationError(["+y+"]); ":" validate.errors = ["+y+"]; return false; ":" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else {  ";var _=d?"data"+(d-1||""):"parentData";t+=" "+m+" = "+x+"; ",d||(t+="if ("+_+" !== undefined)"),t+=" "+_+"["+(d?r.dataPathArr[d]:"parentDataProperty")+"] = "+x+"; } "}else{(W=W||[]).push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'type' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(c)+" , params: { type: '",t+=P?""+F.join(","):""+F,t+="' } ",!1!==r.opts.messages&&(t+=" , message: 'should be ",t+=P?""+F.join(","):""+F,t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";y=t;t=W.pop(),t+=!r.compositeRule&&h?r.async?" throw new ValidationError(["+y+"]); ":" validate.errors = ["+y+"]; return false; ":" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}t+=" } "}}if(r.schema.o&&!n)t+=" "+r.RULES.all.o.code(r,"$ref")+" ",h&&(t+=" } if (errors === ",t+=g?"0":"errs_"+u,t+=") { ",w+="}");else{var z=r.RULES;if(z)for(var R=-1,V=z.length-1;R<V;)if(G(j=z[R+=1])){if(j.type&&(t+=" if ("+r.util.checkDataType(j.type,m)+") { "),r.opts.useDefaults)if("object"==j.type&&r.schema.properties){var N=Object.keys(l=r.schema.properties);if(N)for(var C,T=-1,q=N.length-1;T<q;){if(void 0!==(B=l[C=N[T+=1]]).default){var M=m+r.util.getProperty(C);if(r.compositeRule){if(r.opts.strictDefaults){E="default is ignored for: "+M;if("log"!==r.opts.strictDefaults)throw Error(E);r.logger.warn(E)}}else t+=" if ("+M+" === undefined ","empty"==r.opts.useDefaults&&(t+=" || "+M+" === null || "+M+" === '' "),t+=" ) "+M+" = ",t+="shared"==r.opts.useDefaults?" "+r.useDefault(B.default)+" ":" "+JSON.stringify(B.default)+" ",t+="; "}}}else if("array"==j.type&&Array.isArray(r.schema.items)){var U=r.schema.items;if(U){S=-1;for(var B,L=U.length-1;S<L;)if(void 0!==(B=U[S+=1]).default){M=m+"["+S+"]";if(r.compositeRule){if(r.opts.strictDefaults){E="default is ignored for: "+M;if("log"!==r.opts.strictDefaults)throw Error(E);r.logger.warn(E)}}else t+=" if ("+M+" === undefined ","empty"==r.opts.useDefaults&&(t+=" || "+M+" === null || "+M+" === '' "),t+=" ) "+M+" = ",t+="shared"==r.opts.useDefaults?" "+r.useDefault(B.default)+" ":" "+JSON.stringify(B.default)+" ",t+="; "}}}var H=j.rules;if(H)for(var J,Z=-1,K=H.length-1;Z<K;)if(Y(J=H[Z+=1])){var Q=J.code(r,J.keyword,j.type);Q&&(t+=" "+Q+" ",h&&(b+="}"))}if(h&&(t+=" "+b+" ",b=""),j.type&&(t+=" } ",F&&F===j.type&&!$)){var W;v=r.schemaPath+".type",c=r.errSchemaPath+"/type";(W=W||[]).push(t+=" else { "),t="",!1!==r.createErrors?(t+=" { keyword: 'type' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(c)+" , params: { type: '",t+=P?""+F.join(","):""+F,t+="' } ",!1!==r.opts.messages&&(t+=" , message: 'should be ",t+=P?""+F.join(","):""+F,t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";y=t;t=W.pop(),t+=!r.compositeRule&&h?r.async?" throw new ValidationError(["+y+"]); ":" validate.errors = ["+y+"]; return false; ":" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } "}h&&(t+=" if (errors === ",t+=g?"0":"errs_"+u,t+=") { ",w+="}")}}function G(r){for(var e=r.rules,a=0;a<e.length;a++)if(Y(e[a]))return!0}function Y(e){return void 0!==r.schema[e.keyword]||e.implements&&function(e){for(var a=e.implements,t=0;t<a.length;t++)if(void 0!==r.schema[a[t]])return!0}(e)}return h&&(t+=" "+w+" "),g?(i?(t+=" if (errors === 0) return data;           ",t+=" else throw new ValidationError(vErrors); "):(t+=" validate.errors = vErrors; ",t+=" return errors === 0;       "),t+=" }; return validate;"):t+=" var "+p+" = errors === errs_"+u+";",t=r.util.cleanUpCode(t),g&&(t=r.util.finalCleanUpCode(t,i)),t},$r=R.ucs2length,jr=Er.Validation,Or=function r(e,a,t,i){var n=this,o=this._opts,s=[void 0],f={},u=[],d={},l=[],v={},c=[],h=xr.call(this,e,a=a||{schema:e,refVal:s,refs:f},i),m=this._compilations[h.index];if(h.compiling)return m.callValidate=function r(){var e=m.validate,a=e.apply(this,arguments);return r.errors=e.errors,a};var p=this._formats,y=this.RULES;try{var g=b(e,a,t,i);m.validate=g;var E=m.callValidate;return E&&(E.schema=g.schema,E.errors=null,E.refs=g.refs,E.refVal=g.refVal,E.root=g.root,E.s=g.s,o.sourceCode&&(E.source=g.source)),g}finally{Dr.call(this,e,a,i)}function b(e,t,i,d){var v=!t||t&&t.schema==e;if(t.schema!=a.schema)return r.call(n,e,t,i,d);var h,m=!0===e.s,g=Pr({isTop:!0,schema:e,isRoot:v,baseId:d,root:t,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Er.MissingRef,RULES:y,validate:Pr,util:R,resolve:or,resolveRef:w,usePattern:$,useDefault:j,useCustomRule:O,opts:o,formats:p,logger:n.logger,self:n});g=zr(s,kr)+zr(u,Ir)+zr(l,Sr)+zr(c,_r)+g,o.processCode&&(g=o.processCode(g));try{h=Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",g)(n,y,p,a,s,l,c,z,$r,jr),s[0]=h}catch(r){throw n.logger.error("Error compiling schema, function code:",g),r}return h.schema=e,h.errors=null,h.refs=f,h.refVal=s,h.root=v?h:t,m&&(h.s=!0),!0===o.sourceCode&&(h.source={code:g,patterns:u,defaults:l}),h}function w(e,i,u){i=or.url(e,i);var d,l,v=f[i];if(void 0!==v)return P(d=s[v],l="refVal["+v+"]");if(!u&&a.refs){var c=a.refs[i];if(void 0!==c)return P(d=a.refVal[c],l=F(i,d))}l=F(i);var h=or.call(n,b,a,i);if(void 0===h){var m=t&&t[i];m&&(h=or.inlineRef(m,o.inlineRefs)?m:r.call(n,m,a,t,e))}if(void 0!==h)return function(r,e){s[f[r]]=e}(i,h),P(h,l);!function(r){delete f[r]}(i)}function F(r,e){var a=s.length;return s[a]=e,f[r]=a,"refVal"+a}function P(r,e){return"object"==typeof r||"boolean"==typeof r?{code:e,schema:r,inline:!0}:{code:e,s:r&&!!r.s}}function $(r){var e=d[r];return void 0===e&&(e=d[r]=u.length,u[e]=r),"pattern"+e}function j(r){switch(typeof r){case"boolean":case"number":return""+r;case"string":return R.toQuotedString(r);case"object":if(null===r)return"null";var e=Fr(r),a=v[e];return void 0===a&&(a=v[e]=l.length,l[a]=r),"default"+a}}function O(r,e,a,t){if(!1!==n._opts.validateSchema){var i=r.definition.dependencies;if(i&&!i.every((function(r){return Object.prototype.hasOwnProperty.call(a,r)})))throw Error("parent schema must have all required keywords: "+i.join(","));var s=r.definition.validateSchema;if(s)if(!s(e)){var f="keyword schema is invalid: "+n.errorsText(s.errors);if("log"!=n._opts.validateSchema)throw Error(f);n.logger.error(f)}}var u,d=r.definition.compile,l=r.definition.inline,v=r.definition.macro;if(d)u=d.call(n,e,a,t);else if(v)u=v.call(n,e,a,t),!1!==o.validateSchema&&n.validateSchema(u,!0);else if(l)u=l.call(n,t,r.keyword,e,a);else if(!(u=r.definition.validate))return;if(void 0===u)throw Error('custom keyword "'+r.keyword+'"failed to compile');var h=c.length;return c[h]=u,{code:"customRule"+h,validate:u}}};function xr(r,e,a){var t=Ar.call(this,r,e,a);return t>=0?{index:t,compiling:!0}:(this._compilations[t=this._compilations.length]={schema:r,root:e,baseId:a},{index:t,compiling:!1})}function Dr(r,e,a){var t=Ar.call(this,r,e,a);t>=0&&this._compilations.splice(t,1)}function Ar(r,e,a){for(var t=0;t<this._compilations.length;t++){var i=this._compilations[t];if(i.schema==r&&i.root==e&&i.baseId==a)return t}return-1}function Ir(r,e){return"var pattern"+r+" = new RegExp("+R.toQuotedString(e[r])+");"}function Sr(r){return"var default"+r+" = defaults["+r+"];"}function kr(r,e){return void 0===e[r]?"":"var refVal"+r+" = refVal["+r+"];"}function _r(r){return"var customRule"+r+" = customRules["+r+"];"}function zr(r,e){if(!r.length)return"";for(var a="",t=0;t<r.length;t++)a+=e(t,r);return a}var Rr=I((function(r){var e=r.exports=function(){this._cache={}};e.prototype.put=function(r,e){this._cache[r]=e},e.prototype.get=function(r){return this._cache[r]},e.prototype.del=function(r){delete this._cache[r]},e.prototype.clear=function(){this._cache={}}})),Vr=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Nr=[0,31,28,31,30,31,30,31,31,30,31,30,31],Cr=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Tr=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,qr=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Mr=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Ur=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Br=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Lr=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Hr=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Jr=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Zr=Kr;function Kr(r){return R.copy(Kr[r="full"==r?"full":"fast"])}function Qr(r){var e=r.match(Vr);if(!e)return!1;var a=+e[2],t=+e[3];return a>=1&&a<=12&&t>=1&&t<=(2==a&&function(r){return r%4==0&&(r%100!=0||r%400==0)}(+e[1])?29:Nr[a])}function Wr(r,e){var a=r.match(Cr);if(!a)return!1;var t=a[1],i=a[2],n=a[3];return(t<=23&&i<=59&&n<=59||23==t&&59==i&&60==n)&&(!e||a[5])}Kr.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Mr,url:Ur,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Tr,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:re,uuid:Br,"json-pointer":Lr,"json-pointer-uri-fragment":Hr,"relative-json-pointer":Jr},Kr.full={date:Qr,time:Wr,"date-time":function(r){var e=r.split(Gr);return 2==e.length&&Qr(e[0])&&Wr(e[1],!0)},uri:function(r){return Yr.test(r)&&qr.test(r)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":Mr,url:Ur,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Tr,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:re,uuid:Br,"json-pointer":Lr,"json-pointer-uri-fragment":Hr,"relative-json-pointer":Jr};var Gr=/t|\s/i;var Yr=/\/|:/;var Xr=/[^\\]\\Z/;function re(r){if(Xr.test(r))return!1;try{return RegExp(r),!0}catch(r){return!1}}var ee=function(r,e,a){var t,i=" ",n=r.level,o=r.dataLevel,s=r.schema[e],f=r.schemaPath+r.util.getProperty(e),u=r.errSchemaPath+"/"+e,d=!r.opts.allErrors,l="data"+(o||""),v=r.opts.l&&s&&s.l;v?(i+=" var schema"+n+" = "+r.util.getData(s.l,o,r.dataPathArr)+"; ",t="schema"+n):t=s;var c="maximum"==e,h=c?"exclusiveMaximum":"exclusiveMinimum",m=r.schema[h],p=r.opts.l&&m&&m.l,y=c?"<":">",g=c?">":"<",E=void 0;if(p){var b=r.util.getData(m.l,o,r.dataPathArr),w="exclusive"+n,F="exclType"+n,P="exclIsNumber"+n,$="' + "+(x="op"+n)+" + '";i+=" var schemaExcl"+n+" = "+b+"; ";var j;E=h;(j=j||[]).push(i+=" var "+w+"; var "+F+" = typeof "+(b="schemaExcl"+n)+"; if ("+F+" != 'boolean' && "+F+" != 'undefined' && "+F+" != 'number') { "),i="",!1!==r.createErrors?(i+=" { keyword: '"+(E||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(u)+" , params: {} ",!1!==r.opts.messages&&(i+=" , message: '"+h+" should be boolean' "),r.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+l+" "),i+=" } "):i+=" {} ";var O=i;i=j.pop(),i+=!r.compositeRule&&d?r.async?" throw new ValidationError(["+O+"]); ":" validate.errors = ["+O+"]; return false; ":" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",v&&(i+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),i+=" "+F+" == 'number' ? ( ("+w+" = "+t+" === undefined || "+b+" "+y+"= "+t+") ? "+l+" "+g+"= "+b+" : "+l+" "+g+" "+t+" ) : ( ("+w+" = "+b+" === true) ? "+l+" "+g+"= "+t+" : "+l+" "+g+" "+t+" ) || "+l+" !== "+l+") { var op"+n+" = "+w+" ? '"+y+"' : '"+y+"='; ",void 0===s&&(E=h,u=r.errSchemaPath+"/"+h,t=b,v=p)}else{$=y;if((P="number"==typeof m)&&v){var x="'"+$+"'";i+=" if ( ",v&&(i+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),i+=" ( "+t+" === undefined || "+m+" "+y+"= "+t+" ? "+l+" "+g+"= "+m+" : "+l+" "+g+" "+t+" ) || "+l+" !== "+l+") { "}else{P&&void 0===s?(w=!0,E=h,u=r.errSchemaPath+"/"+h,t=m,g+="="):(P&&(t=Math[c?"min":"max"](m,s)),m===(!P||t)?(w=!0,E=h,u=r.errSchemaPath+"/"+h,g+="="):(w=!1,$+="="));x="'"+$+"'";i+=" if ( ",v&&(i+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),i+=" "+l+" "+g+" "+t+" || "+l+" !== "+l+") { "}}E=E||e,(j=j||[]).push(i),i="",!1!==r.createErrors?(i+=" { keyword: '"+(E||"_limit")+"' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(u)+" , params: { comparison: "+x+", limit: "+t+", exclusive: "+w+" } ",!1!==r.opts.messages&&(i+=" , message: 'should be "+$+" ",i+=v?"' + "+t:t+"'"),r.opts.verbose&&(i+=" , schema:  ",i+=v?"validate.schema"+f:""+s,i+="         , parentSchema: validate.schema"+r.schemaPath+" , data: "+l+" "),i+=" } "):i+=" {} ";O=i;return i=j.pop(),i+=!r.compositeRule&&d?r.async?" throw new ValidationError(["+O+"]); ":" validate.errors = ["+O+"]; return false; ":" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",d&&(i+=" else { "),i},ae=function(r,e,a){var t,i=" ",n=r.level,o=r.dataLevel,s=r.schema[e],f=r.schemaPath+r.util.getProperty(e),u=r.errSchemaPath+"/"+e,d=!r.opts.allErrors,l="data"+(o||""),v=r.opts.l&&s&&s.l;v?(i+=" var schema"+n+" = "+r.util.getData(s.l,o,r.dataPathArr)+"; ",t="schema"+n):t=s,i+="if ( ",v&&(i+=" ("+t+" !== undefined && typeof "+t+" != 'number') || ");var c=e,h=h||[];h.push(i+=" "+l+".length "+("maxItems"==e?">":"<")+" "+t+") { "),i="",!1!==r.createErrors?(i+=" { keyword: '"+(c||"_limitItems")+"' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(u)+" , params: { limit: "+t+" } ",!1!==r.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==e?"more":"fewer",i+=" than ",i+=v?"' + "+t+" + '":""+s,i+=" items' "),r.opts.verbose&&(i+=" , schema:  ",i+=v?"validate.schema"+f:""+s,i+="         , parentSchema: validate.schema"+r.schemaPath+" , data: "+l+" "),i+=" } "):i+=" {} ";var m=i;return i=h.pop(),i+=!r.compositeRule&&d?r.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},te=function(r,e,a){var t,i=" ",n=r.level,o=r.dataLevel,s=r.schema[e],f=r.schemaPath+r.util.getProperty(e),u=r.errSchemaPath+"/"+e,d=!r.opts.allErrors,l="data"+(o||""),v=r.opts.l&&s&&s.l;v?(i+=" var schema"+n+" = "+r.util.getData(s.l,o,r.dataPathArr)+"; ",t="schema"+n):t=s,i+="if ( ",v&&(i+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),i+=!1===r.opts.unicode?" "+l+".length ":" ucs2length("+l+") ";var c=e,h=h||[];h.push(i+=" "+("maxLength"==e?">":"<")+" "+t+") { "),i="",!1!==r.createErrors?(i+=" { keyword: '"+(c||"_limitLength")+"' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(u)+" , params: { limit: "+t+" } ",!1!==r.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==e?"longer":"shorter",i+=" than ",i+=v?"' + "+t+" + '":""+s,i+=" characters' "),r.opts.verbose&&(i+=" , schema:  ",i+=v?"validate.schema"+f:""+s,i+="         , parentSchema: validate.schema"+r.schemaPath+" , data: "+l+" "),i+=" } "):i+=" {} ";var m=i;return i=h.pop(),i+=!r.compositeRule&&d?r.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},ie=function(r,e,a){var t,i=" ",n=r.level,o=r.dataLevel,s=r.schema[e],f=r.schemaPath+r.util.getProperty(e),u=r.errSchemaPath+"/"+e,d=!r.opts.allErrors,l="data"+(o||""),v=r.opts.l&&s&&s.l;v?(i+=" var schema"+n+" = "+r.util.getData(s.l,o,r.dataPathArr)+"; ",t="schema"+n):t=s,i+="if ( ",v&&(i+=" ("+t+" !== undefined && typeof "+t+" != 'number') || ");var c=e,h=h||[];h.push(i+=" Object.keys("+l+").length "+("maxProperties"==e?">":"<")+" "+t+") { "),i="",!1!==r.createErrors?(i+=" { keyword: '"+(c||"_limitProperties")+"' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(u)+" , params: { limit: "+t+" } ",!1!==r.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==e?"more":"fewer",i+=" than ",i+=v?"' + "+t+" + '":""+s,i+=" properties' "),r.opts.verbose&&(i+=" , schema:  ",i+=v?"validate.schema"+f:""+s,i+="         , parentSchema: validate.schema"+r.schemaPath+" , data: "+l+" "),i+=" } "):i+=" {} ";var m=i;return i=h.pop(),i+=!r.compositeRule&&d?r.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},ne={o:function(r,e,a){var t,i,n=" ",o=r.dataLevel,s=r.schema[e],f=r.errSchemaPath+"/"+e,u=!r.opts.allErrors,d="data"+(o||""),l="valid"+r.level;if("#"==s||"#/"==s)r.isRoot?(t=r.async,i="validate"):(t=!0===r.root.schema.s,i="root.refVal[0]");else{var v=r.resolveRef(r.baseId,s,r.isRoot);if(void 0===v){var c=r.MissingRefError.message(r.baseId,s);if("fail"==r.opts.missingRefs){r.logger.error(c),(y=y||[]).push(n),n="",!1!==r.createErrors?(n+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { ref: '"+r.util.escapeQuotes(s)+"' } ",!1!==r.opts.messages&&(n+=" , message: 'can\\'t resolve reference "+r.util.escapeQuotes(s)+"' "),r.opts.verbose&&(n+=" , schema: "+r.util.toQuotedString(s)+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var h=n;n=y.pop(),n+=!r.compositeRule&&u?r.async?" throw new ValidationError(["+h+"]); ":" validate.errors = ["+h+"]; return false; ":" var err = "+h+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(n+=" if (false) { ")}else{if("ignore"!=r.opts.missingRefs)throw new r.MissingRefError(r.baseId,s,c);r.logger.warn(c),u&&(n+=" if (true) { ")}}else if(v.inline){var m=r.util.copy(r);m.level++;var p="valid"+m.level;m.schema=v.schema,m.schemaPath="",m.errSchemaPath=s,n+=" "+r.validate(m).replace(/validate\.schema/g,v.code)+" ",u&&(n+=" if ("+p+") { ")}else t=!0===v.s||r.async&&!1!==v.s,i=v.code}if(i){var y;(y=y||[]).push(n),n="",n+=r.opts.passContext?" "+i+".call(this, ":" "+i+"( ",n+=" "+d+", (dataPath || '')",'""'!=r.errorPath&&(n+=" + "+r.errorPath);var g=n+=" , "+(o?"data"+(o-1||""):"parentData")+" , "+(o?r.dataPathArr[o]:"parentDataProperty")+", rootData)  ";if(n=y.pop(),t){if(!r.async)throw Error("async schema referenced by sync schema");u&&(n+=" var "+l+"; "),n+=" try { await "+g+"; ",u&&(n+=" "+l+" = true; "),n+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(n+=" "+l+" = false; "),n+=" } ",u&&(n+=" if ("+l+") { ")}else n+=" if (!"+g+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",u&&(n+=" else { ")}return n},allOf:function(r,e,a){var t=" ",i=r.schema[e],n=r.schemaPath+r.util.getProperty(e),o=r.errSchemaPath+"/"+e,s=!r.opts.allErrors,f=r.util.copy(r),u="";f.level++;var d="valid"+f.level,l=f.baseId,v=!0,c=i;if(c)for(var h,m=-1,p=c.length-1;m<p;)h=c[m+=1],(r.opts.strictKeywords?"object"==typeof h&&Object.keys(h).length>0:r.util.schemaHasRules(h,r.RULES.all))&&(v=!1,f.schema=h,f.schemaPath=n+"["+m+"]",f.errSchemaPath=o+"/"+m,t+="  "+r.validate(f)+" ",f.baseId=l,s&&(t+=" if ("+d+") { ",u+="}"));return s&&(t+=v?" if (true) { ":" "+u.slice(0,-1)+" "),t=r.util.cleanUpCode(t)},anyOf:function(r,e,a){var t=" ",i=r.level,n=r.dataLevel,o=r.schema[e],s=r.schemaPath+r.util.getProperty(e),f=r.errSchemaPath+"/"+e,u=!r.opts.allErrors,d="data"+(n||""),l="valid"+i,v="errs__"+i,c=r.util.copy(r),h="";c.level++;var m="valid"+c.level;if(o.every((function(e){return r.opts.strictKeywords?"object"==typeof e&&Object.keys(e).length>0:r.util.schemaHasRules(e,r.RULES.all)}))){var p=c.baseId;t+=" var "+v+" = errors; var "+l+" = false;  ";var y=r.compositeRule;r.compositeRule=c.compositeRule=!0;var g=o;if(g)for(var E,b=-1,w=g.length-1;b<w;)E=g[b+=1],c.schema=E,c.schemaPath=s+"["+b+"]",c.errSchemaPath=f+"/"+b,t+="  "+r.validate(c)+" ",c.baseId=p,t+=" "+l+" = "+l+" || "+m+"; if (!"+l+") { ",h+="}";r.compositeRule=c.compositeRule=y,t+=" "+h+" if (!"+l+") {   var err =   ",!1!==r.createErrors?(t+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: {} ",!1!==r.opts.messages&&(t+=" , message: 'should match some schema in anyOf' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!r.compositeRule&&u&&(t+=r.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),t+=" } else {  errors = "+v+"; if (vErrors !== null) { if ("+v+") vErrors.length = "+v+"; else vErrors = null; } ",r.opts.allErrors&&(t+=" } "),t=r.util.cleanUpCode(t)}else u&&(t+=" if (true) { ");return t},u:function(r,e,a){var t=" ",i=r.errSchemaPath+"/"+e,n=r.util.toQuotedString(r.schema[e]);return!0===r.opts.u?t+=" console.log("+n+");":"function"==typeof r.opts.u&&(t+=" self._opts.$comment("+n+", "+r.util.toQuotedString(i)+", validate.root.schema);"),t},const:function(r,e,a){var t=" ",i=r.level,n=r.dataLevel,o=r.schema[e],s=r.schemaPath+r.util.getProperty(e),f=r.errSchemaPath+"/"+e,u=!r.opts.allErrors,d="data"+(n||""),l="valid"+i,v=r.opts.l&&o&&o.l;v&&(t+=" var schema"+i+" = "+r.util.getData(o.l,n,r.dataPathArr)+"; "),v||(t+=" var schema"+i+" = validate.schema"+s+";");var c=c||[];c.push(t+="var "+l+" = equal("+d+", schema"+i+"); if (!"+l+") {   "),t="",!1!==r.createErrors?(t+=" { keyword: 'const' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { allowedValue: schema"+i+" } ",!1!==r.opts.messages&&(t+=" , message: 'should be equal to constant' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var h=t;return t=c.pop(),t+=!r.compositeRule&&u?r.async?" throw new ValidationError(["+h+"]); ":" validate.errors = ["+h+"]; return false; ":" var err = "+h+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",u&&(t+=" else { "),t},contains:function(r,e,a){var t=" ",i=r.level,n=r.dataLevel,o=r.schema[e],s=r.schemaPath+r.util.getProperty(e),f=r.errSchemaPath+"/"+e,u=!r.opts.allErrors,d="data"+(n||""),l="valid"+i,v="errs__"+i,c=r.util.copy(r);c.level++;var h="valid"+c.level,m="i"+i,p=c.dataLevel=r.dataLevel+1,y="data"+p,g=r.baseId,E=r.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:r.util.schemaHasRules(o,r.RULES.all);if(t+="var "+v+" = errors;var "+l+";",E){var b=r.compositeRule;r.compositeRule=c.compositeRule=!0,c.schema=o,c.schemaPath=s,c.errSchemaPath=f,t+=" var "+h+" = false; for (var "+m+" = 0; "+m+" < "+d+".length; "+m+"++) { ",c.errorPath=r.util.getPathExpr(r.errorPath,m,r.opts.jsonPointers,!0);var w=d+"["+m+"]";c.dataPathArr[p]=m;var F=r.validate(c);c.baseId=g,r.util.varOccurences(F,y)<2?t+=" "+r.util.varReplace(F,y,w)+" ":t+=" var "+y+" = "+w+"; "+F+" ",t+=" if ("+h+") break; }  ",r.compositeRule=c.compositeRule=b,t+="  if (!"+h+") {"}else t+=" if ("+d+".length == 0) {";var P=P||[];P.push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: {} ",!1!==r.opts.messages&&(t+=" , message: 'should contain a valid item' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var $=t;return t=P.pop(),t+=!r.compositeRule&&u?r.async?" throw new ValidationError(["+$+"]); ":" validate.errors = ["+$+"]; return false; ":" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { ",E&&(t+="  errors = "+v+"; if (vErrors !== null) { if ("+v+") vErrors.length = "+v+"; else vErrors = null; } "),r.opts.allErrors&&(t+=" } "),t=r.util.cleanUpCode(t)},dependencies:function(r,e,a){var t=" ",i=r.level,n=r.dataLevel,o=r.schema[e],s=r.schemaPath+r.util.getProperty(e),f=r.errSchemaPath+"/"+e,u=!r.opts.allErrors,d="data"+(n||""),l="errs__"+i,v=r.util.copy(r),c="";v.level++;var h="valid"+v.level,m={},p={},y=r.opts.ownProperties;for(b in o){var g=Array.isArray(R=o[b])?p:m;g[b]=R}t+="var "+l+" = errors;";var E=r.errorPath;for(var b in t+="var missing"+i+";",p)if((g=p[b]).length){if(t+=" if ( "+d+r.util.getProperty(b)+" !== undefined ",y&&(t+=" && Object.prototype.hasOwnProperty.call("+d+", '"+r.util.escapeQuotes(b)+"') "),u){t+=" && ( ";var w=g;if(w)for(var F=-1,P=w.length-1;F<P;){A=w[F+=1],F&&(t+=" || "),t+=" ( ( "+(_=d+(k=r.util.getProperty(A)))+" === undefined ",y&&(t+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+r.util.escapeQuotes(A)+"') "),t+=") && (missing"+i+" = "+r.util.toQuotedString(r.opts.jsonPointers?A:k)+") ) "}t+=")) {  ";var $="missing"+i,j="' + "+$+" + '";r.opts._errorDataPathProperty&&(r.errorPath=r.opts.jsonPointers?r.util.getPathExpr(E,$,!0):E+" + "+$);var O=O||[];O.push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { property: '"+r.util.escapeQuotes(b)+"', missingProperty: '"+j+"', depsCount: "+g.length+", deps: '"+r.util.escapeQuotes(1==g.length?g[0]:g.join(", "))+"' } ",!1!==r.opts.messages&&(t+=" , message: 'should have ",t+=1==g.length?"property "+r.util.escapeQuotes(g[0]):"properties "+r.util.escapeQuotes(g.join(", ")),t+=" when property "+r.util.escapeQuotes(b)+" is present' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var x=t;t=O.pop(),t+=!r.compositeRule&&u?r.async?" throw new ValidationError(["+x+"]); ":" validate.errors = ["+x+"]; return false; ":" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{t+=" ) { ";var D=g;if(D)for(var A,I=-1,S=D.length-1;I<S;){A=D[I+=1];var k=r.util.getProperty(A),_=(j=r.util.escapeQuotes(A),d+k);r.opts._errorDataPathProperty&&(r.errorPath=r.util.getPath(E,A,r.opts.jsonPointers)),t+=" if ( "+_+" === undefined ",y&&(t+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+r.util.escapeQuotes(A)+"') "),t+=") {  var err =   ",!1!==r.createErrors?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { property: '"+r.util.escapeQuotes(b)+"', missingProperty: '"+j+"', depsCount: "+g.length+", deps: '"+r.util.escapeQuotes(1==g.length?g[0]:g.join(", "))+"' } ",!1!==r.opts.messages&&(t+=" , message: 'should have ",t+=1==g.length?"property "+r.util.escapeQuotes(g[0]):"properties "+r.util.escapeQuotes(g.join(", ")),t+=" when property "+r.util.escapeQuotes(b)+" is present' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t+=" }   ",u&&(c+="}",t+=" else { ")}r.errorPath=E;var z=v.baseId;for(var b in m){var R=m[b];(r.opts.strictKeywords?"object"==typeof R&&Object.keys(R).length>0:r.util.schemaHasRules(R,r.RULES.all))&&(t+=" "+h+" = true; if ( "+d+r.util.getProperty(b)+" !== undefined ",y&&(t+=" && Object.prototype.hasOwnProperty.call("+d+", '"+r.util.escapeQuotes(b)+"') "),t+=") { ",v.schema=R,v.schemaPath=s+r.util.getProperty(b),v.errSchemaPath=f+"/"+r.util.escapeFragment(b),t+="  "+r.validate(v)+" ",v.baseId=z,t+=" }  ",u&&(t+=" if ("+h+") { ",c+="}"))}return u&&(t+="   "+c+" if ("+l+" == errors) {"),t=r.util.cleanUpCode(t)},enum:function(r,e,a){var t=" ",i=r.level,n=r.dataLevel,o=r.schema[e],s=r.schemaPath+r.util.getProperty(e),f=r.errSchemaPath+"/"+e,u=!r.opts.allErrors,d="data"+(n||""),l="valid"+i,v=r.opts.l&&o&&o.l;v&&(t+=" var schema"+i+" = "+r.util.getData(o.l,n,r.dataPathArr)+"; ");var c="i"+i,h="schema"+i;v||(t+=" var "+h+" = validate.schema"+s+";"),t+="var "+l+";",v&&(t+=" if (schema"+i+" === undefined) "+l+" = true; else if (!Array.isArray(schema"+i+")) "+l+" = false; else {"),t+=l+" = false;for (var "+c+"=0; "+c+"<"+h+".length; "+c+"++) if (equal("+d+", "+h+"["+c+"])) { "+l+" = true; break; }",v&&(t+="  }  ");var m=m||[];m.push(t+=" if (!"+l+") {   "),t="",!1!==r.createErrors?(t+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { allowedValues: schema"+i+" } ",!1!==r.opts.messages&&(t+=" , message: 'should be equal to one of the allowed values' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var p=t;return t=m.pop(),t+=!r.compositeRule&&u?r.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",u&&(t+=" else { "),t},format:function(r,e,a){var t=" ",i=r.level,n=r.dataLevel,o=r.schema[e],s=r.schemaPath+r.util.getProperty(e),f=r.errSchemaPath+"/"+e,u=!r.opts.allErrors,d="data"+(n||"");if(!1===r.opts.format)return u&&(t+=" if (true) { "),t;var l,v=r.opts.l&&o&&o.l;v?(t+=" var schema"+i+" = "+r.util.getData(o.l,n,r.dataPathArr)+"; ",l="schema"+i):l=o;var c=r.opts.unknownFormats,h=Array.isArray(c);if(v){t+=" var "+(m="format"+i)+" = formats["+l+"]; var "+(p="isObject"+i)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(y="formatType"+i)+" = "+p+" && "+m+".type || 'string'; if ("+p+") { ",r.async&&(t+=" var async"+i+" = "+m+".async; "),t+=" "+m+" = "+m+".validate; } if (  ",v&&(t+=" ("+l+" !== undefined && typeof "+l+" != 'string') || "),t+=" (","ignore"!=c&&(t+=" ("+l+" && !"+m+" ",h&&(t+=" && self._opts.unknownFormats.indexOf("+l+") == -1 "),t+=") || "),t+=" ("+m+" && "+y+" == '"+a+"' && !(typeof "+m+" == 'function' ? ",t+=r.async?" (async"+i+" ? await "+m+"("+d+") : "+m+"("+d+")) ":" "+m+"("+d+") ",t+=" : "+m+".test("+d+"))))) {"}else{var m;if(!(m=r.formats[o])){if("ignore"==c)return r.logger.warn('unknown format "'+o+'" ignored in schema at path "'+r.errSchemaPath+'"'),u&&(t+=" if (true) { "),t;if(h&&c.indexOf(o)>=0)return u&&(t+=" if (true) { "),t;throw Error('unknown format "'+o+'" is used in schema at path "'+r.errSchemaPath+'"')}var p,y=(p="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(p){var g=!0===m.async;m=m.validate}if(y!=a)return u&&(t+=" if (true) { "),t;if(g){if(!r.async)throw Error("async format in sync schema");t+=" if (!(await "+(E="formats"+r.util.getProperty(o)+".validate")+"("+d+"))) { "}else{t+=" if (! ";var E="formats"+r.util.getProperty(o);p&&(E+=".validate"),t+="function"==typeof m?" "+E+"("+d+") ":" "+E+".test("+d+") ",t+=") { "}}var b=b||[];b.push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'format' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { format:  ",t+=v?""+l:""+r.util.toQuotedString(o),t+="  } ",!1!==r.opts.messages&&(t+=" , message: 'should match format \"",t+=v?"' + "+l+" + '":""+r.util.escapeQuotes(o),t+="\"' "),r.opts.verbose&&(t+=" , schema:  ",t+=v?"validate.schema"+s:""+r.util.toQuotedString(o),t+="         , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var w=t;return t=b.pop(),t+=!r.compositeRule&&u?r.async?" throw new ValidationError(["+w+"]); ":" validate.errors = ["+w+"]; return false; ":" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",u&&(t+=" else { "),t},if:function(r,e,a){var t=" ",i=r.level,n=r.dataLevel,o=r.schema[e],s=r.schemaPath+r.util.getProperty(e),f=r.errSchemaPath+"/"+e,u=!r.opts.allErrors,d="data"+(n||""),l="valid"+i,v="errs__"+i,c=r.util.copy(r);c.level++;var h="valid"+c.level,m=r.schema.then,p=r.schema.else,y=void 0!==m&&(r.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:r.util.schemaHasRules(m,r.RULES.all)),g=void 0!==p&&(r.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0:r.util.schemaHasRules(p,r.RULES.all)),E=c.baseId;if(y||g){var b;c.createErrors=!1,c.schema=o,c.schemaPath=s,c.errSchemaPath=f,t+=" var "+v+" = errors; var "+l+" = true;  ";var w=r.compositeRule;r.compositeRule=c.compositeRule=!0,t+="  "+r.validate(c)+" ",c.baseId=E,c.createErrors=!0,t+="  errors = "+v+"; if (vErrors !== null) { if ("+v+") vErrors.length = "+v+"; else vErrors = null; }  ",r.compositeRule=c.compositeRule=w,y?(t+=" if ("+h+") {  ",c.schema=r.schema.then,c.schemaPath=r.schemaPath+".then",c.errSchemaPath=r.errSchemaPath+"/then",t+="  "+r.validate(c)+" ",c.baseId=E,t+=" "+l+" = "+h+"; ",y&&g?t+=" var "+(b="ifClause"+i)+" = 'then'; ":b="'then'",t+=" } ",g&&(t+=" else { ")):t+=" if (!"+h+") { ",g&&(c.schema=r.schema.else,c.schemaPath=r.schemaPath+".else",c.errSchemaPath=r.errSchemaPath+"/else",t+="  "+r.validate(c)+" ",c.baseId=E,t+=" "+l+" = "+h+"; ",y&&g?t+=" var "+(b="ifClause"+i)+" = 'else'; ":b="'else'",t+=" } "),t+=" if (!"+l+") {   var err =   ",!1!==r.createErrors?(t+=" { keyword: 'if' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { failingKeyword: "+b+" } ",!1!==r.opts.messages&&(t+=" , message: 'should match \"' + "+b+" + '\" schema' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!r.compositeRule&&u&&(t+=r.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),t+=" }   ",u&&(t+=" else { "),t=r.util.cleanUpCode(t)}else u&&(t+=" if (true) { ");return t},items:function(r,e,a){var t=" ",i=r.level,n=r.dataLevel,o=r.schema[e],s=r.schemaPath+r.util.getProperty(e),f=r.errSchemaPath+"/"+e,u=!r.opts.allErrors,d="data"+(n||""),l="valid"+i,v="errs__"+i,c=r.util.copy(r),h="";c.level++;var m="valid"+c.level,p="i"+i,y=c.dataLevel=r.dataLevel+1,g="data"+y,E=r.baseId;if(t+="var "+v+" = errors;var "+l+";",Array.isArray(o)){var b=r.schema.additionalItems;if(!1===b){t+=" "+l+" = "+d+".length <= "+o.length+"; ";var w=f;f=r.errSchemaPath+"/additionalItems";var F=F||[];F.push(t+="  if (!"+l+") {   "),t="",!1!==r.createErrors?(t+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { limit: "+o.length+" } ",!1!==r.opts.messages&&(t+=" , message: 'should NOT have more than "+o.length+" items' "),r.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var P=t;t=F.pop(),t+=!r.compositeRule&&u?r.async?" throw new ValidationError(["+P+"]); ":" validate.errors = ["+P+"]; return false; ":" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",f=w,u&&(h+="}",t+=" else { ")}var $=o;if($)for(var j,O=-1,x=$.length-1;O<x;)if(j=$[O+=1],r.opts.strictKeywords?"object"==typeof j&&Object.keys(j).length>0:r.util.schemaHasRules(j,r.RULES.all)){t+=" "+m+" = true; if ("+d+".length > "+O+") { ";var D=d+"["+O+"]";c.schema=j,c.schemaPath=s+"["+O+"]",c.errSchemaPath=f+"/"+O,c.errorPath=r.util.getPathExpr(r.errorPath,O,r.opts.jsonPointers,!0),c.dataPathArr[y]=O;var A=r.validate(c);c.baseId=E,r.util.varOccurences(A,g)<2?t+=" "+r.util.varReplace(A,g,D)+" ":t+=" var "+g+" = "+D+"; "+A+" ",t+=" }  ",u&&(t+=" if ("+m+") { ",h+="}")}if("object"==typeof b&&(r.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:r.util.schemaHasRules(b,r.RULES.all))){c.schema=b,c.schemaPath=r.schemaPath+".additionalItems",c.errSchemaPath=r.errSchemaPath+"/additionalItems",t+=" "+m+" = true; if ("+d+".length > "+o.length+") {  for (var "+p+" = "+o.length+"; "+p+" < "+d+".length; "+p+"++) { ",c.errorPath=r.util.getPathExpr(r.errorPath,p,r.opts.jsonPointers,!0);D=d+"["+p+"]";c.dataPathArr[y]=p;A=r.validate(c);c.baseId=E,r.util.varOccurences(A,g)<2?t+=" "+r.util.varReplace(A,g,D)+" ":t+=" var "+g+" = "+D+"; "+A+" ",u&&(t+=" if (!"+m+") break; "),t+=" } }  ",u&&(t+=" if ("+m+") { ",h+="}")}}else if(r.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:r.util.schemaHasRules(o,r.RULES.all)){c.schema=o,c.schemaPath=s,c.errSchemaPath=f,t+="  for (var "+p+" = 0; "+p+" < "+d+".length; "+p+"++) { ",c.errorPath=r.util.getPathExpr(r.errorPath,p,r.opts.jsonPointers,!0);D=d+"["+p+"]";c.dataPathArr[y]=p;A=r.validate(c);c.baseId=E,r.util.varOccurences(A,g)<2?t+=" "+r.util.varReplace(A,g,D)+" ":t+=" var "+g+" = "+D+"; "+A+" ",u&&(t+=" if (!"+m+") break; "),t+=" }"}return u&&(t+=" "+h+" if ("+v+" == errors) {"),t=r.util.cleanUpCode(t)},maximum:ee,minimum:ee,maxItems:ae,minItems:ae,maxLength:te,minLength:te,maxProperties:ie,minProperties:ie,multipleOf:function(r,e,a){var t,i=" ",n=r.level,o=r.dataLevel,s=r.schema[e],f=r.schemaPath+r.util.getProperty(e),u=r.errSchemaPath+"/"+e,d=!r.opts.allErrors,l="data"+(o||""),v=r.opts.l&&s&&s.l;v?(i+=" var schema"+n+" = "+r.util.getData(s.l,o,r.dataPathArr)+"; ",t="schema"+n):t=s,i+="var division"+n+";if (",v&&(i+=" "+t+" !== undefined && ( typeof "+t+" != 'number' || "),i+=" (division"+n+" = "+l+" / "+t+", ",i+=r.opts.multipleOfPrecision?" Math.abs(Math.round(division"+n+") - division"+n+") > 1e-"+r.opts.multipleOfPrecision+" ":" division"+n+" !== parseInt(division"+n+") ",i+=" ) ",v&&(i+="  )  ");var c=c||[];c.push(i+=" ) {   "),i="",!1!==r.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(u)+" , params: { multipleOf: "+t+" } ",!1!==r.opts.messages&&(i+=" , message: 'should be multiple of ",i+=v?"' + "+t:t+"'"),r.opts.verbose&&(i+=" , schema:  ",i+=v?"validate.schema"+f:""+s,i+="         , parentSchema: validate.schema"+r.schemaPath+" , data: "+l+" "),i+=" } "):i+=" {} ";var h=i;return i=c.pop(),i+=!r.compositeRule&&d?r.async?" throw new ValidationError(["+h+"]); ":" validate.errors = ["+h+"]; return false; ":" var err = "+h+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},not:function(r,e,a){var t=" ",i=r.level,n=r.dataLevel,o=r.schema[e],s=r.schemaPath+r.util.getProperty(e),f=r.errSchemaPath+"/"+e,u=!r.opts.allErrors,d="data"+(n||""),l="errs__"+i,v=r.util.copy(r);v.level++;var c="valid"+v.level;if(r.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:r.util.schemaHasRules(o,r.RULES.all)){v.schema=o,v.schemaPath=s,v.errSchemaPath=f,t+=" var "+l+" = errors;  ";var h,m=r.compositeRule;r.compositeRule=v.compositeRule=!0,v.createErrors=!1,v.opts.allErrors&&(h=v.opts.allErrors,v.opts.allErrors=!1),t+=" "+r.validate(v)+" ",v.createErrors=!0,h&&(v.opts.allErrors=h),r.compositeRule=v.compositeRule=m;var p=p||[];p.push(t+=" if ("+c+") {   "),t="",!1!==r.createErrors?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: {} ",!1!==r.opts.messages&&(t+=" , message: 'should NOT be valid' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var y=t;t=p.pop(),t+=!r.compositeRule&&u?r.async?" throw new ValidationError(["+y+"]); ":" validate.errors = ["+y+"]; return false; ":" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else {  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; } ",r.opts.allErrors&&(t+=" } ")}else t+="  var err =   ",!1!==r.createErrors?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: {} ",!1!==r.opts.messages&&(t+=" , message: 'should NOT be valid' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(t+=" if (false) { ");return t},oneOf:function(r,e,a){var t=" ",i=r.level,n=r.dataLevel,o=r.schema[e],s=r.schemaPath+r.util.getProperty(e),f=r.errSchemaPath+"/"+e,u=!r.opts.allErrors,d="data"+(n||""),l="valid"+i,v="errs__"+i,c=r.util.copy(r),h="";c.level++;var m="valid"+c.level,p=c.baseId,y="prevValid"+i,g="passingSchemas"+i;t+="var "+v+" = errors , "+y+" = false , "+l+" = false , "+g+" = null; ";var E=r.compositeRule;r.compositeRule=c.compositeRule=!0;var b=o;if(b)for(var w,F=-1,P=b.length-1;F<P;)w=b[F+=1],(r.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0:r.util.schemaHasRules(w,r.RULES.all))?(c.schema=w,c.schemaPath=s+"["+F+"]",c.errSchemaPath=f+"/"+F,t+="  "+r.validate(c)+" ",c.baseId=p):t+=" var "+m+" = true; ",F&&(t+=" if ("+m+" && "+y+") { "+l+" = false; "+g+" = ["+g+", "+F+"]; } else { ",h+="}"),t+=" if ("+m+") { "+l+" = "+y+" = true; "+g+" = "+F+"; }";return r.compositeRule=c.compositeRule=E,t+=h+"if (!"+l+") {   var err =   ",!1!==r.createErrors?(t+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { passingSchemas: "+g+" } ",!1!==r.opts.messages&&(t+=" , message: 'should match exactly one schema in oneOf' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!r.compositeRule&&u&&(t+=r.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),t+="} else {  errors = "+v+"; if (vErrors !== null) { if ("+v+") vErrors.length = "+v+"; else vErrors = null; }",r.opts.allErrors&&(t+=" } "),t},pattern:function(r,e,a){var t,i=" ",n=r.level,o=r.dataLevel,s=r.schema[e],f=r.schemaPath+r.util.getProperty(e),u=r.errSchemaPath+"/"+e,d=!r.opts.allErrors,l="data"+(o||""),v=r.opts.l&&s&&s.l;v?(i+=" var schema"+n+" = "+r.util.getData(s.l,o,r.dataPathArr)+"; ",t="schema"+n):t=s;var c=v?"(new RegExp("+t+"))":r.usePattern(s);i+="if ( ",v&&(i+=" ("+t+" !== undefined && typeof "+t+" != 'string') || ");var h=h||[];h.push(i+=" !"+c+".test("+l+") ) {   "),i="",!1!==r.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(u)+" , params: { pattern:  ",i+=v?""+t:""+r.util.toQuotedString(s),i+="  } ",!1!==r.opts.messages&&(i+=" , message: 'should match pattern \"",i+=v?"' + "+t+" + '":""+r.util.escapeQuotes(s),i+="\"' "),r.opts.verbose&&(i+=" , schema:  ",i+=v?"validate.schema"+f:""+r.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+r.schemaPath+" , data: "+l+" "),i+=" } "):i+=" {} ";var m=i;return i=h.pop(),i+=!r.compositeRule&&d?r.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},properties:function(r,e,a){var t=" ",i=r.level,n=r.dataLevel,o=r.schema[e],s=r.schemaPath+r.util.getProperty(e),f=r.errSchemaPath+"/"+e,u=!r.opts.allErrors,d="data"+(n||""),l="errs__"+i,v=r.util.copy(r),c="";v.level++;var h="valid"+v.level,m="key"+i,p="idx"+i,y=v.dataLevel=r.dataLevel+1,g="data"+y,E="dataProperties"+i,b=Object.keys(o||{}),w=r.schema.patternProperties||{},F=Object.keys(w),P=r.schema.additionalProperties,$=b.length||F.length,j=!1===P,O="object"==typeof P&&Object.keys(P).length,x=r.opts.removeAdditional,D=j||O||x,A=r.opts.ownProperties,I=r.baseId,S=r.schema.required;if(S&&(!r.opts.l||!S.l)&&S.length<r.opts.loopRequired)var k=r.util.toHash(S);if(t+="var "+l+" = errors;var "+h+" = true;",A&&(t+=" var "+E+" = undefined;"),D){if(t+=A?" "+E+" = "+E+" || Object.keys("+d+"); for (var "+p+"=0; "+p+"<"+E+".length; "+p+"++) { var "+m+" = "+E+"["+p+"]; ":" for (var "+m+" in "+d+") { ",$){if(t+=" var isAdditional"+i+" = !(false ",b.length)if(b.length>8)t+=" || validate.schema"+s+".hasOwnProperty("+m+") ";else{var _=b;if(_)for(var z=-1,R=_.length-1;z<R;)K=_[z+=1],t+=" || "+m+" == "+r.util.toQuotedString(K)+" "}if(F.length){var V=F;if(V)for(var N=-1,C=V.length-1;N<C;)ir=V[N+=1],t+=" || "+r.usePattern(ir)+".test("+m+") "}t+=" ); if (isAdditional"+i+") { "}if("all"==x)t+=" delete "+d+"["+m+"]; ";else{var T=r.errorPath,q="' + "+m+" + '";if(r.opts._errorDataPathProperty&&(r.errorPath=r.util.getPathExpr(r.errorPath,m,r.opts.jsonPointers)),j)if(x)t+=" delete "+d+"["+m+"]; ";else{var M=f;f=r.errSchemaPath+"/additionalProperties",(er=er||[]).push(t+=" "+h+" = false; "),t="",!1!==r.createErrors?(t+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { additionalProperty: '"+q+"' } ",!1!==r.opts.messages&&(t+=" , message: '",t+=r.opts._errorDataPathProperty?"is an invalid additional property":"should NOT have additional properties",t+="' "),r.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var U=t;t=er.pop(),t+=!r.compositeRule&&u?r.async?" throw new ValidationError(["+U+"]); ":" validate.errors = ["+U+"]; return false; ":" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f=M,u&&(t+=" break; ")}else if(O)if("failing"==x){t+=" var "+l+" = errors;  ";var B=r.compositeRule;r.compositeRule=v.compositeRule=!0,v.schema=P,v.schemaPath=r.schemaPath+".additionalProperties",v.errSchemaPath=r.errSchemaPath+"/additionalProperties",v.errorPath=r.opts._errorDataPathProperty?r.errorPath:r.util.getPathExpr(r.errorPath,m,r.opts.jsonPointers);var L=d+"["+m+"]";v.dataPathArr[y]=m;var H=r.validate(v);v.baseId=I,r.util.varOccurences(H,g)<2?t+=" "+r.util.varReplace(H,g,L)+" ":t+=" var "+g+" = "+L+"; "+H+" ",t+=" if (!"+h+") { errors = "+l+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+d+"["+m+"]; }  ",r.compositeRule=v.compositeRule=B}else{v.schema=P,v.schemaPath=r.schemaPath+".additionalProperties",v.errSchemaPath=r.errSchemaPath+"/additionalProperties",v.errorPath=r.opts._errorDataPathProperty?r.errorPath:r.util.getPathExpr(r.errorPath,m,r.opts.jsonPointers);L=d+"["+m+"]";v.dataPathArr[y]=m;H=r.validate(v);v.baseId=I,r.util.varOccurences(H,g)<2?t+=" "+r.util.varReplace(H,g,L)+" ":t+=" var "+g+" = "+L+"; "+H+" ",u&&(t+=" if (!"+h+") break; ")}r.errorPath=T}$&&(t+=" } "),t+=" }  ",u&&(t+=" if ("+h+") { ",c+="}")}var J=r.opts.useDefaults&&!r.compositeRule;if(b.length){var Z=b;if(Z)for(var K,Q=-1,W=Z.length-1;Q<W;){var G=o[K=Z[Q+=1]];if(r.opts.strictKeywords?"object"==typeof G&&Object.keys(G).length>0:r.util.schemaHasRules(G,r.RULES.all)){var Y=r.util.getProperty(K),X=(L=d+Y,J&&void 0!==G.default);v.schema=G,v.schemaPath=s+Y,v.errSchemaPath=f+"/"+r.util.escapeFragment(K),v.errorPath=r.util.getPath(r.errorPath,K,r.opts.jsonPointers),v.dataPathArr[y]=r.util.toQuotedString(K);H=r.validate(v);if(v.baseId=I,r.util.varOccurences(H,g)<2){H=r.util.varReplace(H,g,L);var rr=L}else{rr=g;t+=" var "+g+" = "+L+"; "}if(X)t+=" "+H+" ";else{if(k&&k[K]){t+=" if ( "+rr+" === undefined ",A&&(t+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+r.util.escapeQuotes(K)+"') "),t+=") { "+h+" = false; ";T=r.errorPath,M=f;var er,ar=r.util.escapeQuotes(K);r.opts._errorDataPathProperty&&(r.errorPath=r.util.getPath(T,K,r.opts.jsonPointers)),f=r.errSchemaPath+"/required",(er=er||[]).push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { missingProperty: '"+ar+"' } ",!1!==r.opts.messages&&(t+=" , message: '",t+=r.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+ar+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";U=t;t=er.pop(),t+=!r.compositeRule&&u?r.async?" throw new ValidationError(["+U+"]); ":" validate.errors = ["+U+"]; return false; ":" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f=M,r.errorPath=T,t+=" } else { "}else u?(t+=" if ( "+rr+" === undefined ",A&&(t+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+r.util.escapeQuotes(K)+"') "),t+=") { "+h+" = true; } else { "):(t+=" if ("+rr+" !== undefined ",A&&(t+=" &&   Object.prototype.hasOwnProperty.call("+d+", '"+r.util.escapeQuotes(K)+"') "),t+=" ) { ");t+=" "+H+" } "}}u&&(t+=" if ("+h+") { ",c+="}")}}if(F.length){var tr=F;if(tr)for(var ir,nr=-1,or=tr.length-1;nr<or;){G=w[ir=tr[nr+=1]];if(r.opts.strictKeywords?"object"==typeof G&&Object.keys(G).length>0:r.util.schemaHasRules(G,r.RULES.all)){v.schema=G,v.schemaPath=r.schemaPath+".patternProperties"+r.util.getProperty(ir),v.errSchemaPath=r.errSchemaPath+"/patternProperties/"+r.util.escapeFragment(ir),t+=A?" "+E+" = "+E+" || Object.keys("+d+"); for (var "+p+"=0; "+p+"<"+E+".length; "+p+"++) { var "+m+" = "+E+"["+p+"]; ":" for (var "+m+" in "+d+") { ",t+=" if ("+r.usePattern(ir)+".test("+m+")) { ",v.errorPath=r.util.getPathExpr(r.errorPath,m,r.opts.jsonPointers);L=d+"["+m+"]";v.dataPathArr[y]=m;H=r.validate(v);v.baseId=I,r.util.varOccurences(H,g)<2?t+=" "+r.util.varReplace(H,g,L)+" ":t+=" var "+g+" = "+L+"; "+H+" ",u&&(t+=" if (!"+h+") break; "),t+=" } ",u&&(t+=" else "+h+" = true; "),t+=" }  ",u&&(t+=" if ("+h+") { ",c+="}")}}}return u&&(t+=" "+c+" if ("+l+" == errors) {"),t=r.util.cleanUpCode(t)},propertyNames:function(r,e,a){var t=" ",i=r.level,n=r.dataLevel,o=r.schema[e],s=r.schemaPath+r.util.getProperty(e),f=r.errSchemaPath+"/"+e,u=!r.opts.allErrors,d="data"+(n||""),l="errs__"+i,v=r.util.copy(r);v.level++;var c="valid"+v.level;if(t+="var "+l+" = errors;",r.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:r.util.schemaHasRules(o,r.RULES.all)){v.schema=o,v.schemaPath=s,v.errSchemaPath=f;var h="key"+i,m="idx"+i,p="i"+i,y="' + "+h+" + '",g="data"+(v.dataLevel=r.dataLevel+1),E="dataProperties"+i,b=r.opts.ownProperties,w=r.baseId;b&&(t+=" var "+E+" = undefined; "),t+=b?" "+E+" = "+E+" || Object.keys("+d+"); for (var "+m+"=0; "+m+"<"+E+".length; "+m+"++) { var "+h+" = "+E+"["+m+"]; ":" for (var "+h+" in "+d+") { ",t+=" var startErrs"+i+" = errors; ";var F=h,P=r.compositeRule;r.compositeRule=v.compositeRule=!0;var $=r.validate(v);v.baseId=w,r.util.varOccurences($,g)<2?t+=" "+r.util.varReplace($,g,F)+" ":t+=" var "+g+" = "+F+"; "+$+" ",r.compositeRule=v.compositeRule=P,t+=" if (!"+c+") { for (var "+p+"=startErrs"+i+"; "+p+"<errors; "+p+"++) { vErrors["+p+"].propertyName = "+h+"; }   var err =   ",!1!==r.createErrors?(t+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { propertyName: '"+y+"' } ",!1!==r.opts.messages&&(t+=" , message: 'property name \\'"+y+"\\' is invalid' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!r.compositeRule&&u&&(t+=r.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),u&&(t+=" break; "),t+=" } }"}return u&&(t+="  if ("+l+" == errors) {"),t=r.util.cleanUpCode(t)},required:function(r,e,a){var t=" ",i=r.level,n=r.dataLevel,o=r.schema[e],s=r.schemaPath+r.util.getProperty(e),f=r.errSchemaPath+"/"+e,u=!r.opts.allErrors,d="data"+(n||""),l="valid"+i,v=r.opts.l&&o&&o.l;v&&(t+=" var schema"+i+" = "+r.util.getData(o.l,n,r.dataPathArr)+"; ");var c="schema"+i;if(!v)if(o.length<r.opts.loopRequired&&r.schema.properties&&Object.keys(r.schema.properties).length){var h=[],m=o;if(m)for(var p,y=-1,g=m.length-1;y<g;){p=m[y+=1];var E=r.schema.properties[p];E&&(r.opts.strictKeywords?"object"==typeof E&&Object.keys(E).length>0:r.util.schemaHasRules(E,r.RULES.all))||(h[h.length]=p)}}else h=o;if(v||h.length){var b=r.errorPath,w=v||h.length>=r.opts.loopRequired,F=r.opts.ownProperties;if(u)if(t+=" var missing"+i+"; ",w){v||(t+=" var "+c+" = validate.schema"+s+"; ");var P="' + "+(A="schema"+i+"["+(O="i"+i)+"]")+" + '";r.opts._errorDataPathProperty&&(r.errorPath=r.util.getPathExpr(b,A,r.opts.jsonPointers)),t+=" var "+l+" = true; ",v&&(t+=" if (schema"+i+" === undefined) "+l+" = true; else if (!Array.isArray(schema"+i+")) "+l+" = false; else {"),t+=" for (var "+O+" = 0; "+O+" < "+c+".length; "+O+"++) { "+l+" = "+d+"["+c+"["+O+"]] !== undefined ",F&&(t+=" &&   Object.prototype.hasOwnProperty.call("+d+", "+c+"["+O+"]) "),t+="; if (!"+l+") break; } ",v&&(t+="  }  "),(D=D||[]).push(t+="  if (!"+l+") {   "),t="",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { missingProperty: '"+P+"' } ",!1!==r.opts.messages&&(t+=" , message: '",t+=r.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+P+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var $=t;t=D.pop(),t+=!r.compositeRule&&u?r.async?" throw new ValidationError(["+$+"]); ":" validate.errors = ["+$+"]; return false; ":" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else{t+=" if ( ";var j=h;if(j)for(var O=-1,x=j.length-1;O<x;){S=j[O+=1],O&&(t+=" || "),t+=" ( ( "+(R=d+(z=r.util.getProperty(S)))+" === undefined ",F&&(t+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+r.util.escapeQuotes(S)+"') "),t+=") && (missing"+i+" = "+r.util.toQuotedString(r.opts.jsonPointers?S:z)+") ) "}t+=") {  ";var D;P="' + "+(A="missing"+i)+" + '";r.opts._errorDataPathProperty&&(r.errorPath=r.opts.jsonPointers?r.util.getPathExpr(b,A,!0):b+" + "+A),(D=D||[]).push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { missingProperty: '"+P+"' } ",!1!==r.opts.messages&&(t+=" , message: '",t+=r.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+P+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";$=t;t=D.pop(),t+=!r.compositeRule&&u?r.async?" throw new ValidationError(["+$+"]); ":" validate.errors = ["+$+"]; return false; ":" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else if(w){v||(t+=" var "+c+" = validate.schema"+s+"; ");var A;P="' + "+(A="schema"+i+"["+(O="i"+i)+"]")+" + '";r.opts._errorDataPathProperty&&(r.errorPath=r.util.getPathExpr(b,A,r.opts.jsonPointers)),v&&(t+=" if ("+c+" && !Array.isArray("+c+")) {  var err =   ",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { missingProperty: '"+P+"' } ",!1!==r.opts.messages&&(t+=" , message: '",t+=r.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+P+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+c+" !== undefined) { "),t+=" for (var "+O+" = 0; "+O+" < "+c+".length; "+O+"++) { if ("+d+"["+c+"["+O+"]] === undefined ",F&&(t+=" || ! Object.prototype.hasOwnProperty.call("+d+", "+c+"["+O+"]) "),t+=") {  var err =   ",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { missingProperty: '"+P+"' } ",!1!==r.opts.messages&&(t+=" , message: '",t+=r.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+P+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",v&&(t+="  }  ")}else{var I=h;if(I)for(var S,k=-1,_=I.length-1;k<_;){S=I[k+=1];var z=r.util.getProperty(S),R=(P=r.util.escapeQuotes(S),d+z);r.opts._errorDataPathProperty&&(r.errorPath=r.util.getPath(b,S,r.opts.jsonPointers)),t+=" if ( "+R+" === undefined ",F&&(t+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+r.util.escapeQuotes(S)+"') "),t+=") {  var err =   ",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(f)+" , params: { missingProperty: '"+P+"' } ",!1!==r.opts.messages&&(t+=" , message: '",t+=r.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+P+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r.errorPath=b}else u&&(t+=" if (true) {");return t},uniqueItems:function(r,e,a){var t,i=" ",n=r.level,o=r.dataLevel,s=r.schema[e],f=r.schemaPath+r.util.getProperty(e),u=r.errSchemaPath+"/"+e,d=!r.opts.allErrors,l="data"+(o||""),v="valid"+n,c=r.opts.l&&s&&s.l;if(c?(i+=" var schema"+n+" = "+r.util.getData(s.l,o,r.dataPathArr)+"; ",t="schema"+n):t=s,(s||c)&&!1!==r.opts.uniqueItems){c&&(i+=" var "+v+"; if ("+t+" === false || "+t+" === undefined) "+v+" = true; else if (typeof "+t+" != 'boolean') "+v+" = false; else { "),i+=" var i = "+l+".length , "+v+" = true , j; if (i > 1) { ";var h=r.schema.items&&r.schema.items.type,m=Array.isArray(h);if(!h||"object"==h||"array"==h||m&&(h.indexOf("object")>=0||h.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+l+"[i], "+l+"[j])) { "+v+" = false; break outer; } } } ";else i+=" var itemIndices = {}, item; for (;i--;) { var item = "+l+"[i]; ",i+=" if ("+r.util["checkDataType"+(m?"s":"")](h,"item",!0)+") continue; ",m&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+v+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } ";i+=" } ",c&&(i+="  }  ");var p=p||[];p.push(i+=" if (!"+v+") {   "),i="",!1!==r.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(u)+" , params: { i: i, j: j } ",!1!==r.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),r.opts.verbose&&(i+=" , schema:  ",i+=c?"validate.schema"+f:""+s,i+="         , parentSchema: validate.schema"+r.schemaPath+" , data: "+l+" "),i+=" } "):i+=" {} ";var y=i;i=p.pop(),i+=!r.compositeRule&&d?r.async?" throw new ValidationError(["+y+"]); ":" validate.errors = ["+y+"]; return false; ":" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",d&&(i+=" else { ")}else d&&(i+=" if (true) { ");return i},validate:Pr},oe=R.toHash,se=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],fe=function(r,e){for(var a=0;a<e.length;a++){r=JSON.parse(JSON.stringify(r));var t,i=e[a].split("/"),n=r;for(t=1;t<i.length;t++)n=n[i[t]];for(t=0;t<se.length;t++){var o=se[t],s=n[o];s&&(n[o]={anyOf:[s,{o:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return r},ue=Er.MissingRef,de=function r(e,a,t){var i=this;if("function"!=typeof this._opts.loadSchema)throw Error("options.loadSchema should be a function");"function"==typeof a&&(t=a,a=void 0);var n=o(e).then((function(){var r=i._addSchema(e,void 0,a);return r.validate||function r(e){try{return i._compile(e)}catch(r){if(r instanceof ue)return t(r);throw r}function t(t){var n=t.missingSchema;if(u(n))throw Error("Schema "+n+" is loaded but "+t.missingRef+" cannot be resolved");var s=i._loadingSchemas[n];return s||(s=i._loadingSchemas[n]=i._opts.loadSchema(n)).then(f,f),s.then((function(r){if(!u(n))return o(r).then((function(){u(n)||i.addSchema(r,n,void 0,a)}))})).then((function(){return r(e)}));function f(){delete i._loadingSchemas[n]}function u(r){return i._refs[r]||i._schemas[r]}}}(r)}));t&&n.then((function(r){t(null,r)}),t);return n;function o(e){var a=e.v;return a&&!i.getSchema(a)?r.call(i,{o:a},!0):Promise.resolve()}};var le=function(r,e,a){var t,i,n=" ",o=r.level,s=r.dataLevel,f=r.schema[e],u=r.schemaPath+r.util.getProperty(e),d=r.errSchemaPath+"/"+e,l=!r.opts.allErrors,v="data"+(s||""),c="valid"+o,h="errs__"+o,m=r.opts.l&&f&&f.l;m?(n+=" var schema"+o+" = "+r.util.getData(f.l,s,r.dataPathArr)+"; ",i="schema"+o):i=f;var p,y,g,E,b,w="definition"+o,F=this.definition,P="";if(m&&F.l){var $=F.validateSchema;n+=" var "+w+" = RULES.custom['"+e+"'].definition; var "+(b="keywordValidate"+o)+" = "+w+".validate;"}else{if(!(E=r.useCustomRule(this,f,r.schema,r)))return;i="validate.schema"+u,b=E.code,p=F.compile,y=F.inline,g=F.macro}var j=b+".errors",O="i"+o,x="ruleErr"+o,D=F.async;if(D&&!r.async)throw Error("async keyword in sync schema");if(y||g||(n+=j+" = null;"),n+="var "+h+" = errors;var "+c+";",m&&F.l&&(P+="}",n+=" if ("+i+" === undefined) { "+c+" = true; } else { ",$&&(P+="}",n+=" "+c+" = "+w+".validateSchema("+i+"); if ("+c+") { ")),y)n+=F.statements?" "+E.validate+" ":" "+c+" = "+E.validate+"; ";else if(g){var A=r.util.copy(r);P="";A.level++;var I="valid"+A.level;A.schema=E.validate,A.schemaPath="";var S=r.compositeRule;r.compositeRule=A.compositeRule=!0;var k=r.validate(A).replace(/validate\.schema/g,b);r.compositeRule=A.compositeRule=S,n+=" "+k}else{(V=V||[]).push(n),n="",n+="  "+b+".call( ",n+=r.opts.passContext?"this":"self",n+=p||!1===F.schema?" , "+v+" ":" , "+i+" , "+v+" , validate.schema"+r.schemaPath+" ",n+=" , (dataPath || '')",'""'!=r.errorPath&&(n+=" + "+r.errorPath);var _=s?"data"+(s-1||""):"parentData",z=s?r.dataPathArr[s]:"parentDataProperty",R=n+=" , "+_+" , "+z+" , rootData )  ";n=V.pop(),!1===F.errors?(n+=" "+c+" = ",D&&(n+="await "),n+=R+"; "):n+=D?" var "+(j="customErrors"+o)+" = null; try { "+c+" = await "+R+"; } catch (e) { "+c+" = false; if (e instanceof ValidationError) "+j+" = e.errors; else throw e; } ":" "+j+" = null; "+c+" = "+R+"; "}if(F.modifying&&(n+=" if ("+_+") "+v+" = "+_+"["+z+"];"),n+=""+P,F.valid)l&&(n+=" if (true) { ");else{var V;n+=" if ( ",void 0===F.valid?(n+=" !",n+=g?""+I:""+c):n+=" "+!F.valid+" ",t=this.keyword,(V=V||[]).push(n+=") { "),(V=V||[]).push(n=""),n="",!1!==r.createErrors?(n+=" { keyword: '"+(t||"custom")+"' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(d)+" , params: { keyword: '"+this.keyword+"' } ",!1!==r.opts.messages&&(n+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),r.opts.verbose&&(n+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ";var N=n;n=V.pop();var C=n+=!r.compositeRule&&l?r.async?" throw new ValidationError(["+N+"]); ":" validate.errors = ["+N+"]; return false; ":" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";n=V.pop(),y?F.errors?"full"!=F.errors&&(n+="  for (var "+O+"="+h+"; "+O+"<errors; "+O+"++) { var "+x+" = vErrors["+O+"]; if ("+x+".dataPath === undefined) "+x+".dataPath = (dataPath || '') + "+r.errorPath+"; if ("+x+".schemaPath === undefined) { "+x+'.schemaPath = "'+d+'"; } ',r.opts.verbose&&(n+=" "+x+".schema = "+i+"; "+x+".data = "+v+"; "),n+=" } "):!1===F.errors?n+=" "+C+" ":(n+=" if ("+h+" == errors) { "+C+" } else {  for (var "+O+"="+h+"; "+O+"<errors; "+O+"++) { var "+x+" = vErrors["+O+"]; if ("+x+".dataPath === undefined) "+x+".dataPath = (dataPath || '') + "+r.errorPath+"; if ("+x+".schemaPath === undefined) { "+x+'.schemaPath = "'+d+'"; } ',r.opts.verbose&&(n+=" "+x+".schema = "+i+"; "+x+".data = "+v+"; "),n+=" } } "):g?(n+="   var err =   ",!1!==r.createErrors?(n+=" { keyword: '"+(t||"custom")+"' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(d)+" , params: { keyword: '"+this.keyword+"' } ",!1!==r.opts.messages&&(n+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),r.opts.verbose&&(n+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!r.compositeRule&&l&&(n+=r.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; ")):!1===F.errors?n+=" "+C+" ":(n+=" if (Array.isArray("+j+")) { if (vErrors === null) vErrors = "+j+"; else vErrors = vErrors.concat("+j+"); errors = vErrors.length;  for (var "+O+"="+h+"; "+O+"<errors; "+O+"++) { var "+x+" = vErrors["+O+"]; if ("+x+".dataPath === undefined) "+x+".dataPath = (dataPath || '') + "+r.errorPath+";  "+x+'.schemaPath = "'+d+'";  ',r.opts.verbose&&(n+=" "+x+".schema = "+i+"; "+x+".data = "+v+"; "),n+=" } } else { "+C+" } "),n+=" } ",l&&(n+=" else { ")}return n},ve="http://json-schema.org/draft-07/schema#",ce="http://json-schema.org/draft-07/schema#",he="Core schema meta-schema",me={schemaArray:{type:"array",minItems:1,items:{o:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{o:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},pe=["object","boolean"],ye={h:{type:"string",format:"uri-reference"},v:{type:"string",format:"uri"},o:{type:"string",format:"uri-reference"},u:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{o:"#/definitions/nonNegativeInteger"},minLength:{o:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{o:"#"},items:{anyOf:[{o:"#"},{o:"#/definitions/schemaArray"}],default:!0},maxItems:{o:"#/definitions/nonNegativeInteger"},minItems:{o:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{o:"#"},maxProperties:{o:"#/definitions/nonNegativeInteger"},minProperties:{o:"#/definitions/nonNegativeIntegerDefault0"},required:{o:"#/definitions/stringArray"},additionalProperties:{o:"#"},definitions:{type:"object",additionalProperties:{o:"#"},default:{}},properties:{type:"object",additionalProperties:{o:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{o:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{o:"#"},{o:"#/definitions/stringArray"}]}},propertyNames:{o:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{o:"#/definitions/simpleTypes"},{type:"array",items:{o:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{o:"#"},then:{o:"#"},else:{o:"#"},allOf:{o:"#/definitions/schemaArray"},anyOf:{o:"#/definitions/schemaArray"},oneOf:{o:"#/definitions/schemaArray"},not:{o:"#"}},ge=S(Object.freeze({__proto__:null,v:ve,h:ce,title:he,definitions:me,type:pe,properties:ye,default:{v:ve,h:ce,title:he,definitions:me,type:pe,properties:ye,default:!0}})),Ee={h:"https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:ge.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],l:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:ge.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},l:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},be=/^[a-z_$][a-z0-9_$-]*$/i,we=function(r,e){var a=this.RULES;if(a.keywords[r])throw Error("Keyword "+r+" is already defined");if(!be.test(r))throw Error("Keyword "+r+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var t=e.type;if(Array.isArray(t))for(var i=0;i<t.length;i++)o(r,t[i],e);else o(r,t,e);var n=e.metaSchema;n&&(e.l&&this._opts.l&&(n={anyOf:[n,{o:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(n,!0))}function o(r,e,t){for(var i,n=0;n<a.length;n++){var o=a[n];if(o.type==e){i=o;break}}i||a.push(i={type:e,rules:[]});var s={keyword:r,definition:t,custom:!0,code:le,implements:t.implements};i.rules.push(s),a.custom[r]=s}return a.keywords[r]=a.all[r]=!0,this},Fe=function(r){var e=this.RULES.custom[r];return e?e.definition:this.RULES.keywords[r]||!1},Pe=function(r){var e=this.RULES;delete e.keywords[r],delete e.all[r],delete e.custom[r];for(var a=0;a<e.length;a++)for(var t=e[a].rules,i=0;i<t.length;i++)if(t[i].keyword==r){t.splice(i,1);break}return this},$e=function r(e,a){r.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile(Ee,!0);if(t(e))return!0;if(r.errors=t.errors,a)throw Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1};var je="http://json-schema.org/draft-07/schema#",Oe="https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#",xe="Meta-schema for $data reference (JSON Schema extension proposal)",De=["$data"],Ae={l:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Ie=S(Object.freeze({__proto__:null,v:je,h:Oe,description:xe,type:"object",required:De,properties:Ae,additionalProperties:!1,default:{v:je,h:Oe,description:xe,type:"object",required:De,properties:Ae,additionalProperties:!1}})),Se=Re;Re.prototype.validate=function(r,e){var a;if("string"==typeof r){if(!(a=this.getSchema(r)))throw Error('no schema with key or ref "'+r+'"')}else{var t=this._addSchema(r);a=t.validate||this._compile(t)}var i=a(e);!0!==a.s&&(this.errors=a.errors);return i},Re.prototype.compile=function(r,e){var a=this._addSchema(r,void 0,e);return a.validate||this._compile(a)},Re.prototype.addSchema=function(r,e,a,t){if(Array.isArray(r)){for(var i=0;i<r.length;i++)this.addSchema(r[i],void 0,a,t);return this}var n=this._getId(r);if(void 0!==n&&"string"!=typeof n)throw Error("schema id must be string");return Me(this,e=or.normalizeId(e||n)),this._schemas[e]=this._addSchema(r,a,t,!0),this},Re.prototype.addMetaSchema=function(r,e,a){return this.addSchema(r,e,a,!0),this},Re.prototype.validateSchema=function(r,e){var a=r.v;if(void 0!==a&&"string"!=typeof a)throw Error("$schema must be a string");if(!(a=a||this._opts.defaultMeta||function(r){var e=r._opts.meta;return r._opts.defaultMeta="object"==typeof e?r._getId(e)||e:r.getSchema(ke)?ke:void 0,r._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var t=this.validate(a,r);if(!t&&e){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw Error(i);this.logger.error(i)}return t},Re.prototype.getSchema=function(r){var e=Ve(this,r);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return function(r,e){var a=or.schema.call(r,{schema:{}},e);if(a){var t=a.schema,i=a.root,n=a.baseId,o=Or.call(r,t,i,void 0,n);return r._fragments[e]=new ir({ref:e,fragment:!0,schema:t,root:i,baseId:n,validate:o}),o}}(this,r)}},Re.prototype.removeSchema=function(r){if(r instanceof RegExp)return Ne(this,this._schemas,r),Ne(this,this._refs,r),this;switch(typeof r){case"undefined":return Ne(this,this._schemas),Ne(this,this._refs),this._cache.clear(),this;case"string":var e=Ve(this,r);return e&&this._cache.del(e.cacheKey),delete this._schemas[r],delete this._refs[r],this;case"object":var a=this._opts.serialize,t=a?a(r):r;this._cache.del(t);var i=this._getId(r);i&&(i=or.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this},Re.prototype.addFormat=function(r,e){"string"==typeof e&&(e=RegExp(e));return this._formats[r]=e,this},Re.prototype.errorsText=function(r,e){if(!(r=r||this.errors))return"No errors";for(var a=void 0===(e=e||{}).separator?", ":e.separator,t=void 0===e.dataVar?"data":e.dataVar,i="",n=0;n<r.length;n++){var o=r[n];o&&(i+=t+o.dataPath+" "+o.message+a)}return i.slice(0,-a.length)},Re.prototype._addSchema=function(r,e,a,t){if("object"!=typeof r&&"boolean"!=typeof r)throw Error("schema should be object or boolean");var i=this._opts.serialize,n=i?i(r):r,o=this._cache.get(n);if(o)return o;t=t||!1!==this._opts.addUsedSchema;var s=or.normalizeId(this._getId(r));s&&t&&Me(this,s);var f,u=!1!==this._opts.validateSchema&&!e;u&&!(f=s&&s==or.normalizeId(r.v))&&this.validateSchema(r,!0);var d=or.ids.call(this,r),l=new ir({id:s,schema:r,localRefs:d,cacheKey:n,meta:a});"#"!=s[0]&&t&&(this._refs[s]=l);this._cache.put(n,l),u&&f&&this.validateSchema(r,!0);return l},Re.prototype._compile=function(r,e){if(r.compiling)return r.validate=i,i.schema=r.schema,i.errors=null,i.root=e||i,!0===r.schema.s&&(i.s=!0),i;var a,t;r.compiling=!0,r.meta&&(a=this._opts,this._opts=this._metaOpts);try{t=Or.call(this,r.schema,e,r.localRefs)}catch(e){throw delete r.validate,e}finally{r.compiling=!1,r.meta&&(this._opts=a)}return r.validate=t,r.refs=t.refs,r.refVal=t.refVal,r.root=t.root,t;function i(){var e=r.validate,a=e.apply(this,arguments);return i.errors=e.errors,a}},Re.prototype.compileAsync=de,Re.prototype.addKeyword=we,Re.prototype.getKeyword=Fe,Re.prototype.removeKeyword=Pe,Re.prototype.validateKeyword=$e,Re.ValidationError=Er.Validation,Re.MissingRefError=Er.MissingRef,Re.m=fe;var ke="http://json-schema.org/draft-07/schema",_e=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],ze=["/properties"];function Re(r){if(!(this instanceof Re))return new Re(r);var e,a;r=this._opts=R.copy(r)||{},function(r){var e=r._opts.logger;if(!1===e)r.logger={log:Ue,warn:Ue,error:Ue};else{if(void 0===e&&(e=console),!("object"==typeof e&&e.log&&e.warn&&e.error))throw Error("logger must implement log, warn and error methods");r.logger=e}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=Zr(r.format),this._cache=r.cache||new Rr,this._loadingSchemas={},this._compilations=[],this.RULES=((e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}]).all=oe(a=["type","$comment"]),e.types=oe(["number","integer","string","array","object","boolean","null"]),e.forEach((function(r){r.rules=r.rules.map((function(r){var t;if("object"==typeof r){var i=Object.keys(r)[0];t=r[i],r=i,t.forEach((function(r){a.push(r),e.all[r]=!0}))}return a.push(r),e.all[r]={keyword:r,code:ne[r],implements:t}})),e.all.u={keyword:"$comment",code:ne.u},r.type&&(e.types[r.type]=r)})),e.keywords=oe(a.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e),this._getId=function(r){switch(r.schemaId){case"auto":return qe;case"id":return Ce;default:return Te}}(r),r.loopRequired=r.loopRequired||Infinity,"property"==r.errorDataPath&&(r._errorDataPathProperty=!0),void 0===r.serialize&&(r.serialize=Fr),this._metaOpts=function(r){for(var e=R.copy(r._opts),a=0;a<4;a++)delete e[_e[a]];return e}(this),r.formats&&function(r){for(var e in r._opts.formats){r.addFormat(e,r._opts.formats[e])}}(this),r.keywords&&function(r){for(var e in r._opts.keywords){r.addKeyword(e,r._opts.keywords[e])}}(this),function(r){var e;r._opts.l&&r.addMetaSchema(e=Ie,e.h,!0);if(!1===r._opts.meta)return;var a=ge;r._opts.l&&(a=fe(a,ze));r.addMetaSchema(a,ke,!0),r._refs["http://json-schema.org/schema"]=ke}(this),"object"==typeof r.meta&&this.addMetaSchema(r.meta),r.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(r){var e=r._opts.schemas;if(!e)return;if(Array.isArray(e))r.addSchema(e);else for(var a in e)r.addSchema(e[a],a)}(this)}function Ve(r,e){return e=or.normalizeId(e),r._schemas[e]||r._refs[e]||r._fragments[e]}function Ne(r,e,a){for(var t in e){var i=e[t];i.meta||a&&!a.test(t)||(r._cache.del(i.cacheKey),delete e[t])}}function Ce(r){return r.h&&this.logger.warn("schema $id ignored",r.h),r.id}function Te(r){return r.id&&this.logger.warn("schema id ignored",r.id),r.h}function qe(r){if(r.h&&r.id&&r.h!=r.id)throw Error("schema $id is different from id");return r.h||r.id}function Me(r,e){if(r._schemas[e]||r._refs[e])throw Error('schema with key or id "'+e+'" already exists')}function Ue(){}const Be=r=>{const e=new Se({allErrors:!0});if(e.validate(He,r),null!=e.errors){const r=Infinity;let a=[];return e.errors.forEach(e=>{const t=e.schemaPath.split("/").length;t===r?a.push(Le(e)):t<r&&(a=[Le(e)])}),a}return[]},Le=r=>`Ainsley${r.dataPath}${void 0===r.message?"":" "+r.message}`,He={v:"http://json-schema.org/draft-07/schema#",definitions:{Primitive:{anyOf:[{type:"string"},{type:"number"}]}},properties:{children:{items:{anyOf:[{items:[{type:"string"},{items:{items:[{type:"string"},{o:"#/definitions/Primitive"}],minItems:2,maxItems:2,type:"array"},type:"array"}],minItems:2,maxItems:2,type:"array"},{items:[{type:"string"},{anyOf:[{type:"object",additionalProperties:{o:"#/definitions/Primitive"}},{type:"array",items:{anyOf:[{o:"#/definitions/Primitive"},{items:[{o:"#/definitions/Primitive"},{o:"#/definitions/Primitive"}],minItems:2,maxItems:2,type:"array"}]}}]}],minItems:2,maxItems:2,type:"array"},{type:"string"},{o:"#"}]},type:"array"},variables:{type:"object",additionalProperties:{type:"object",additionalProperties:{o:"#/definitions/Primitive"}}},variations:{items:{items:{items:[{type:"string"},{type:"string"}],minItems:2,maxItems:2,type:"array"},type:"array"},type:"array"}},type:"object"},Je=async(r,e=Ze)=>{const a=Be(r);if(a.length>0)throw Error("Invalid input Ainsley:\n"+a.join("\n"));const t=A(r);return Array.isArray(t.children)&&await Promise.all(t.children.map(async(r,a)=>{if("string"==typeof r&&r.startsWith("$")){const i=await Ke(r.slice(1),e);t.children[a]=i}return r})),t},Ze=async r=>{var a;try{return require("ainsley-config-"+r).config}catch(t){try{const t=new URL(r),i=await e(t.href);return(null!==(a=i.headers.get("Content-Type"))&&void 0!==a?a:"").endsWith("/json")?await i.json():await i.text()}catch(e){return await Promise.resolve(`/* $${r} */`)}}},Ke=async(r,e)=>{try{const t=await e(r);return a(t)?await Je(t,e):t}catch(e){return`/* $${r} */`}};var Qe;let We=null===(Qe=globalThis)||void 0===Qe?void 0:Qe.csso;void 0===We&&import("csso").then(({default:r})=>{We=r}).catch(()=>{});const Ge=r=>{const e="?+".indexOf(r[0])+1;return[e,e>0?r.slice(1):r]},Ye=(r,e)=>`${["","?","+"][r]}${e}`,Xe=r=>{try{return We.minify(r).css}catch(e){return We&&We.minify?console.error(e):console.warn("`csso` - an optional dependency - is not installed; inline CSS will not be minified"),r}},ra=/\{[a-z]+\}/gi,ea=(r,e=new Set)=>(r.forEach(r=>{if(Array.isArray(r))ea(r,e);else if("string"==typeof r){const a=r.match(ra);for(let r=0;r<(null!=a?a:[]).length;r++)e.add(a[r].slice(1,-1))}}),e),aa=(r,e,t)=>{var i,n;const o=null!==(i=r.children)&&void 0!==i?i:[],s=new Map,f={ainsley:r,parent:t,usageCounts:s,definedVariables:e},u=[f];for(let r=0;r<o.length;r++){const t=o[r];if(a(t)){const r=null!==(n=t.variables)&&void 0!==n?n:{},a=aa(t,new Set([...e,...Object.keys(r).map(r=>Ge(r)[1])]),f);new Set(a.map(r=>[...r.usageCounts.keys()]).reduce((r,e)=>[...r,...e],[])).forEach(r=>{var e;s.set(r,(null!==(e=s.get(r))&&void 0!==e?e:0)+1)}),u.push(...a)}else if(Array.isArray(t)){ea(t).forEach(r=>{var e;s.set(r,(null!==(e=s.get(r))&&void 0!==e?e:0)+1)})}else o.splice(r,1,Xe(t))}return u};return r.DEFAULT_OPTIONS=i,r.ITERATOR_REGEX="\\{[a-zA-Z0-9_-]+\\}",r.combinations=t,r.defaultGetConfig=Ze,r.embed=(r,e)=>{let a=null;void 0!==e&&(a=document.querySelector("style#"+e)),null===a&&(a=document.createElement("style"),a.type="text/css",void 0!==e&&a.setAttribute("id",e),document.head.appendChild(a)),a.innerHTML=r},r.flatten=Je,r.generate=(r,e={})=>{const a={...i,...e};return o(s(r,a,{}),a)},r.getFlatConfig=Ke,r.isObject=a,r.minify=r=>{var e,a;const t=Be(r);if(t.length>0)throw Error("Invalid input Ainsley:\n"+t.join("\n"));const i=aa(A(r),new Set);for(let r=i.length-1;r>=0;r--){const t=i[r];if(void 0===t.ainsley.children||0===t.ainsley.children.length){if(void 0!==t.parent){const r=null!==(e=t.parent.ainsley.children)&&void 0!==e?e:[];r.splice(r.findIndex(r=>r===t.ainsley),1)}continue}for(let r=0;r<t.ainsley.children.length;r++){const e=t.ainsley.children[r];if("string"==typeof e)if(0===e.length)t.ainsley.children.splice(r--,1);else if(r>0){const a=t.ainsley.children[r-1];"string"==typeof a&&t.ainsley.children.splice(--r,2,`${a}${e}`)}}const n=null!==(a=t.ainsley.variables)&&void 0!==a?a:{};if(Object.keys(n).forEach(r=>{var e,a,i;const[o,s]=Ge(r);if(t.usageCounts.has(s)){if(void 0!==t.parent){if(1===o&&t.parent.definedVariables.has(s))return void delete n[r];if((null!==(e=t.parent.usageCounts.get(s))&&void 0!==e?e:0)<2){"variables"in t.parent.ainsley||(t.parent.ainsley.variables={});const e=t.parent.ainsley.variables,f=null!==(a=Object.keys(e).find(r=>r.endsWith(s)))&&void 0!==a?a:Ye(o,""),[u]=Ge(f),d=null!==(i=e[f])&&void 0!==i?i:{},l=n[r];void 0!==e[f]&&delete e[f],delete n[r],e[Ye(2===o?u:0,s)]={...2===o?d:{},...l}}}}else delete n[r]}),0===Object.keys(n).length&&delete t.ainsley.variables,Array.isArray(t.ainsley.variations)&&(t.ainsley.variations=t.ainsley.variations.filter(r=>0!==r.length)),Array.isArray(t.ainsley.variations)&&0===t.ainsley.variations.length&&delete t.ainsley.variations,!("variations"in t.ainsley)&&!("variables"in t.ainsley)&&void 0!==t.parent){const r=t.parent.ainsley.children,e=r.findIndex(r=>r===t.ainsley);-1!==e&&r.splice(e,1,...t.ainsley.children)}}return i[0].ainsley},r.schema=He,r.validate=Be,r}({},fetch);
//# sourceMappingURL=ainsley.production.js.map
